/*! For license information please see module.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports["react-query"]=t(require("react")):e["react-query"]=t(e.react)}(self,(e=>(()=>{"use strict";var t={215:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(893),a=r(616),u=r(581),s=r(187),d=o(r(434)),i=o(r(324)),l=r(759),c=o(r(63)),f=r(156);t.default=({children:e,endPoints:t,onCreated:r,onRead:o,onUpdated:p,onDeleted:y,delay:m,type:h="array"})=>{const[g,b,v,O]="string"==typeof t?new Array(4).fill(t):[t.create,t.read,t.update,t.delete],{parameterType:_,domain:j,requestMiddleware:q,mode:P,verbosity:x,idName:E}=(0,l.useQueryOptions)();return(0,f.useEffect)((()=>{(0,u.requestLog)(P,x,5,"[endpoints]",`[C]${g}`,`[R]${b}`,`[U]${v}`,`[D]${O}`)}),[g,b,v,O]),(0,n.jsx)(d.default,{children:(0,n.jsx)(i.default,{query:`${b}`,delay:m,onRead:o,children:(t,o,d,i,l)=>(0,n.jsx)(f.Fragment,{children:e({handleCreate:(e,o={method:"POST"})=>{e.preventDefault();const{method:n="POST",pathTail:d}=o,c=(0,s.getFormData)(e.target),f=`${g}/${d?`${d}/`:""}`;return(0,u.requestLog)(P,x,1,`[create][${n}]`,`${j}/${f}`,c),(0,a.request)(j,f,{body:JSON.stringify(c),method:n,headers:q?.(),mode:P}).then((e=>{i?.([...t,e]),r?.()&&l?.()})).catch((()=>{console.error("Erreur de création","Une erreur est survenu lors de la création dans la base de données")}))},read:{data:t,loading:o,error:d},handleUpdate:(e,r={method:"PUT",name:E})=>{e.preventDefault();const{method:o="PUT",pathTail:n,name:d=E}=r,f=(0,s.formExtractor)(e.target,d);let y;y="array"==h?[...t]:t;const m=[];return f.forEach((e=>{const r=(0,s.getPathTail)(e,_,d,n),i=`${v}/${r?`${r}/`:""}`;let l=!1;if("array"==h){const t=y.findIndex((e=>e[d]==r));if(null!=t){const r={...y[t],...e};l=!(0,c.default)(y[t],r),y[t]=r}else y.push(e)}else l=!(0,c.default)(y,t),y={...y,...e};l&&((0,u.requestLog)(P,x,1,`[update][${o}]`,`${j}/${i}`,e),m.push((0,a.request)(j,i,{body:JSON.stringify(e),method:o,headers:q?.(),mode:P})))})),Promise.all(m).then((()=>{i?.(y),p?.()&&l?.()}))},handleDelete:(e,r={method:"DELETE",name:E})=>{e?.preventDefault(),e?.stopPropagation();const{method:o="DELETE",pathTail:n,name:d=E,id:c}=r,f=(0,s.getPathTail)({[d]:c.toString()},_,d,n),p=`${O}/${f}/`;return(0,u.requestLog)(P,x,1,`[delete][${o}]`,`${j}/${p}`),(0,a.request)(j,p,{method:o,headers:q?.(),mode:P}).then((()=>{if("array"==h){const e=t.findIndex((e=>e[d]==c)),r=t;(0,u.requestLog)(P,x,3,`Removing index ${e}`);const o=[...r.slice(0,e),...r.slice(e+1,r.length)];(0,u.requestLog)(P,x,4,"Array updated",o),i?.(o)}else i?.(t);y?.()&&l?.()}))}},l)})})})}},434:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(893),a=o(r(180)),u=o(r(156));class s extends u.default.Component{constructor(){super(...arguments),this.state={hasError:!1,error:{e:void 0,info:void 0}},this.componentDidCatch=(e,t)=>{console.error(e),this.setState({hasError:!0,error:{e,info:t}})}}render(){const{children:e}=this.props,{hasError:t,error:r}=this.state;return t?(0,n.jsxs)("div",{className:a.default.main,children:[(0,n.jsx)("div",{children:r?.e?.message}),(0,n.jsx)("hr",{}),(0,n.jsx)("div",{children:r?.info?.componentStack})]}):(0,n.jsx)(u.default.Fragment,{children:e})}}t.default=s},324:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(893),a=o(r(434)),u=r(759),s=r(156);t.default=({children:e,query:t,method:r,delay:o,body:d,onRead:i})=>{const[l,c]=(0,s.useState)({data:null,loading:!0,error:null}),f=(0,u.useRequest)(),[p,y]=(0,s.useState)(),[m,h]=(0,s.useState)(!1),g=(0,s.useCallback)((e=>c({data:e,loading:!1,error:null})),[l]);return(0,s.useEffect)((()=>{p?.abort();const e=new AbortController,r=window.setTimeout((()=>{f(t,{signal:e.signal}).then((e=>{c({data:e,loading:!1,error:null}),i?.(e)})).catch((e=>{"AbortError"!=e.name&&c({data:null,loading:!1,error:e.toString()})}))}),o??0);return y(e),c({data:null,loading:!0,error:null}),()=>{e?.abort(),window.clearTimeout(r)}}),[t,m]),(0,n.jsx)(a.default,{children:e(l.data,l.loading,l.error,g,(()=>h(!m)))})}},759:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.QueryOptionsProvider=t.useRequest=t.useQueryOptions=void 0;const o=r(616),n=r(156),a=(0,n.createContext)({domain:"",parameterType:"path",mode:"production",verbosity:1,idName:"id"});t.useQueryOptions=()=>{const e=(0,n.useContext)(a);if(!e)throw new Error("No context for 'useQueryOptions'");return e.idName||(e.idName="id"),e},t.useRequest=()=>{const{domain:e,mode:r,requestMiddleware:n}=(0,t.useQueryOptions)();return function(t,a={method:"GET"}){const{headers:u=n(),body:s,method:d="GET",mode:i=r,signal:l}=a;return(0,o.request)(e,t,{body:s,headers:u,method:d,mode:i,signal:l})}},t.QueryOptionsProvider=a.Provider},276:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useQueryOptions=t.useRequest=t.request=t.QueryOptionsProvider=t.Query=t.CRUD=void 0;const n=o(r(215));t.CRUD=n.default;const a=o(r(324));t.Query=a.default;const u=r(759);Object.defineProperty(t,"QueryOptionsProvider",{enumerable:!0,get:function(){return u.QueryOptionsProvider}}),Object.defineProperty(t,"useQueryOptions",{enumerable:!0,get:function(){return u.useQueryOptions}}),Object.defineProperty(t,"useRequest",{enumerable:!0,get:function(){return u.useRequest}});const s=r(616);Object.defineProperty(t,"request",{enumerable:!0,get:function(){return s.request}})},616:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.request=void 0;const o=r(581);t.request=function(e,t,r={method:"GET"}){const{body:n,method:a="GET",headers:u,mode:s="production",signal:d}=r,i=r=>fetch(`${e}/${t}`,{headers:r,method:a,body:n,signal:d}).then((e=>{if(e.ok)return e.text().then((t=>{try{if("application/json"==r?.["Content-Type"])return JSON.parse(t)}catch(t){(0,o.queryWarn)(s,0,0,"Could not parse response to json",e)}return t}));Promise.reject(e)}),(e=>{"AbortError"==e.name?(0,o.queryWarn)(s,0,0,e.message):(0,o.queryError)(e)}));return u?u.then(i):i({})}},581:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.queryError=t.queryWarn=t.requestLog=void 0,t.requestLog=(e,t,r,...o)=>{"development"==e&&r<=t&&console.log("[react-query]",...o)},t.queryWarn=(e,t,r,...o)=>{"development"==e&&r<=t&&console.warn("[react-query]",...o)},t.queryError=(...e)=>{console.error("[react-query]",...e)}},187:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useForceUpdate=t.getPathTail=t.seperate=t.seperateAndKeepIds=t.formExtractor=t.getFormData=void 0;const o=r(156);t.getFormData=e=>{const t=e;return Object.keys(e).map((e=>t[e])).filter((e=>{const t=e.tagName?.toLocaleLowerCase?.();return e.name&&("input"==t||"select"==t)})).reduce(((e,t)=>{const{name:r,value:o,checked:n,type:a,required:u}=t,s="checkbox"==a;if(u&&(""==o||null==o))throw new Error(`Can't use an empty value for ${r}`);let d="number"==a?new Number(o).valueOf():o;return{...e,[r]:s?n:d}}),{})},t.formExtractor=(e,r)=>{const o=(0,t.getFormData)(e);return null!=o[r]?[o]:Object.entries(o).reduce(((e,o)=>{const n=o[0],[a,u]=(0,t.seperateAndKeepIds)([n])[0],s=e.find((e=>e[r]==u));let d=u;try{d=parseInt(u)}catch(e){}return s?s[a]=o[1]:e.push({[r]:d,[a]:o[1]}),e}),[])},t.seperateAndKeepIds=e=>(0,t.seperate)(e).map((e=>{const t=e[1],r=t[t.length-1];return[e[0].replace(new RegExp(`(-|_)?${r}$`),""),r]})),t.seperate=e=>e.map((e=>[e,e.replace(/([0-9]+)/," $1").replace(/(-|_)/g," ").replace(/([A-Z])/g," $1").trim().toLocaleLowerCase().split(" ").filter((e=>""!=e))])),t.getPathTail=(e,t,r,o)=>{const n=e[r];return"path"==t&&""!=n&&null!=n?n:o},t.useForceUpdate=()=>(0,o.useReducer)((()=>({})),{})[1]},63:e=>{e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var o,n,a;if(Array.isArray(t)){if((o=t.length)!=r.length)return!1;for(n=o;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((o=(a=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=o;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,a[n]))return!1;for(n=o;0!=n--;){var u=a[n];if(!e(t[u],r[u]))return!1}return!0}return t!=t&&r!=r}},180:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});const o={"button-default":"N34oaDgHtJlptqxVv9Pn","button-selected":"Ja0ovO_h3eaEsaboqDC7","button-primary":"KTfuLE7LnSGRHDFPD0EA","button-validate":"jY9MIHyO7T8W_QNpfx0k","button-inverse":"m40wbnuJh67XxmYctJLR","button-ignore":"ZeIjhLVvw0JqjuR8kYjT","button-invalid":"ZedjeDkFzo6JcAGxyZPn","button-valid":"Jk7f76XpP7SLD92LvmM3",main:"SIApxQzQlZp0L1gN0_QW"}},251:(e,t,r)=>{var o=r(156),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function i(e,t,r){var o,a={},i=null,l=null;for(o in void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,o)&&!d.hasOwnProperty(o)&&(a[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===a[o]&&(a[o]=t[o]);return{$$typeof:n,type:e,key:i,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=i,t.jsxs=i},893:(e,t,r)=>{e.exports=r(251)},156:t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e].call(a.exports,a,a.exports,o),a.exports}return o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(276)})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBTUMsSUFBS3lGLEVBQVdsRCxNQ0ozRThDLEVBQW9CSyxFQUFJLENBQUNDLEVBQUtDLElBQVU3TyxPQUFPNk0sVUFBVUMsZUFBZUMsS0FBSzZCLEVBQUtDLEdDQ2xGUCxFQUFvQlEsRUFBS3pQLElBQ0gsb0JBQVg0TixRQUEwQkEsT0FBTzhCLGFBQzFDL08sT0FBT0MsZUFBZVosRUFBUzROLE9BQU84QixZQUFhLENBQUU3TyxNQUFPLFdBRTdERixPQUFPQyxlQUFlWixFQUFTLGFBQWMsQ0FBRWEsT0FBTyxLQ0Y3Qm9PLEVBQW9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVhY3QtcXVlcnkvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL3JlYWN0LXF1ZXJ5Ly4vc3JjL2NvbXBvbmVudHMvdXRpbHMvQ1JVRC9pbmRleC50c3giLCJ3ZWJwYWNrOi8vcmVhY3QtcXVlcnkvLi9zcmMvY29tcG9uZW50cy91dGlscy9FcnJvckJvdW5kYXJ5L2luZGV4LnRzeCIsIndlYnBhY2s6Ly9yZWFjdC1xdWVyeS8uL3NyYy9jb21wb25lbnRzL3V0aWxzL1F1ZXJ5L2luZGV4LnRzeCIsIndlYnBhY2s6Ly9yZWFjdC1xdWVyeS8uL3NyYy9jb21wb25lbnRzL3V0aWxzL1F1ZXJ5T3B0aW9uc1Byb3ZpZGVyL2luZGV4LnRzeCIsIndlYnBhY2s6Ly9yZWFjdC1xdWVyeS8uL3NyYy9tb2R1bGUudHMiLCJ3ZWJwYWNrOi8vcmVhY3QtcXVlcnkvLi9zcmMvdXRpbHMvYXBpLnRzIiwid2VicGFjazovL3JlYWN0LXF1ZXJ5Ly4vc3JjL3V0aWxzL2xvZy50cyIsIndlYnBhY2s6Ly9yZWFjdC1xdWVyeS8uL3NyYy91dGlscy91dGlsLnRzIiwid2VicGFjazovL3JlYWN0LXF1ZXJ5Ly4vbm9kZV9tb2R1bGVzL2Zhc3QtZGVlcC1lcXVhbC9pbmRleC5qcyIsIndlYnBhY2s6Ly9yZWFjdC1xdWVyeS8uL3NyYy9jb21wb25lbnRzL3V0aWxzL0Vycm9yQm91bmRhcnkvaW5kZXgubW9kdWxlLnNjc3M/Njk5OSIsIndlYnBhY2s6Ly9yZWFjdC1xdWVyeS8uL25vZGVfbW9kdWxlcy9yZWFjdC9janMvcmVhY3QtanN4LXJ1bnRpbWUucHJvZHVjdGlvbi5taW4uanMiLCJ3ZWJwYWNrOi8vcmVhY3QtcXVlcnkvLi9ub2RlX21vZHVsZXMvcmVhY3QvanN4LXJ1bnRpbWUuanMiLCJ3ZWJwYWNrOi8vcmVhY3QtcXVlcnkvZXh0ZXJuYWwgdW1kIFwicmVhY3RcIiIsIndlYnBhY2s6Ly9yZWFjdC1xdWVyeS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9yZWFjdC1xdWVyeS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vcmVhY3QtcXVlcnkvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9yZWFjdC1xdWVyeS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3JlYWN0LXF1ZXJ5L3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJyZWFjdFwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJyZWFjdFwiXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJyZWFjdC1xdWVyeVwiXSA9IGZhY3RvcnkocmVxdWlyZShcInJlYWN0XCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJyZWFjdC1xdWVyeVwiXSA9IGZhY3Rvcnkocm9vdFtcInJlYWN0XCJdKTtcbn0pKHNlbGYsIChfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xNTZfXykgPT4ge1xucmV0dXJuICIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QganN4X3J1bnRpbWVfMSA9IHJlcXVpcmUoXCJyZWFjdC9qc3gtcnVudGltZVwiKTtcbmNvbnN0IGFwaV8xID0gcmVxdWlyZShcIi4uLy4uLy4uL3V0aWxzL2FwaVwiKTtcbmNvbnN0IGxvZ18xID0gcmVxdWlyZShcIi4uLy4uLy4uL3V0aWxzL2xvZ1wiKTtcbmNvbnN0IHV0aWxfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi91dGlscy91dGlsXCIpO1xuY29uc3QgRXJyb3JCb3VuZGFyeV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9FcnJvckJvdW5kYXJ5XCIpKTtcbmNvbnN0IFF1ZXJ5XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL1F1ZXJ5XCIpKTtcbmNvbnN0IFF1ZXJ5T3B0aW9uc1Byb3ZpZGVyXzEgPSByZXF1aXJlKFwiLi4vUXVlcnlPcHRpb25zUHJvdmlkZXJcIik7XG5jb25zdCBmYXN0X2RlZXBfZXF1YWxfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiZmFzdC1kZWVwLWVxdWFsXCIpKTtcbmNvbnN0IHJlYWN0XzEgPSByZXF1aXJlKFwicmVhY3RcIik7XG4vKipcbiAqIFRoaXMgY29tcG9uZW50IGlzIHVzZWQgdG8gc2ltcGxpZnkgYENSVURgIG9wZXJhdGlvbnMuXG4gKiBZb3UgZ2l2ZSBpdCB0aGUgYGVuZHBvaW50KHMpYCB0byB3aGljaCB5b3Ugd2FudCB0byBkbyByZXF1ZXN0cyBhbmQgaXQgd2lsbCBoYW5kbGVcbiAqIGFsbCBvZiB0aGUgdGFza3MgaW4gdGhlIGJhY2tncm91bmQgYW5kIHVwZGF0ZSB0aGUgc3RhdGUgb2YgdGhlIHZhcmlhYmxlc1xuICogaXQgZ2l2ZXMgeW91IGZyb20gdGhlIGNoaWxkIGZ1bmN0aW9uLlxuICpcbiAqIE1ha2Ugc3VyZSB0byBkZWZpbmUgdGhlIFF1ZXJ5T3B0aW9ucyBwYXJhbSB3aXRoIHRoZSBgUXVlcnlPcHRpb25zUHJvdmlkZXJgIGNvbXBvbmVudFxuICpcbiAqIEdvIHRvIHRoZSBbZXhhbXBsZXMgZGlyZWN0b3J5XShodHRwczovL2JpdGJ1Y2tldC5vcmcvbmVvdmlzaW9uL3JlYWN0LXF1ZXJ5L3NyYy9tYXN0ZXIvc3JjL2V4YW1wbGVzKSB0byBzZWUgZXhhbXBsZXNcbiAqL1xuY29uc3QgQ1JVRCA9ICh7IGNoaWxkcmVuLCBlbmRQb2ludHMsIG9uQ3JlYXRlZCwgb25SZWFkLCBvblVwZGF0ZWQsIG9uRGVsZXRlZCwgZGVsYXksIHR5cGUgPSAnYXJyYXknLCB9KSA9PiB7XG4gICAgY29uc3QgW2NyZWF0ZUVuZHBvaW50LCByZWFkRW5kcG9pbnQsIHVwZGF0ZUVuZHBvaW50LCBkZWxldGVFbmRwb2ludF0gPSB0eXBlb2YgZW5kUG9pbnRzID09ICdzdHJpbmcnXG4gICAgICAgID8gbmV3IEFycmF5KDQpLmZpbGwoZW5kUG9pbnRzKVxuICAgICAgICA6IFtlbmRQb2ludHMuY3JlYXRlLCBlbmRQb2ludHMucmVhZCwgZW5kUG9pbnRzLnVwZGF0ZSwgZW5kUG9pbnRzLmRlbGV0ZV07XG4gICAgY29uc3QgeyBwYXJhbWV0ZXJUeXBlLCBkb21haW4sIHJlcXVlc3RNaWRkbGV3YXJlLCBtb2RlLCB2ZXJib3NpdHksIGlkTmFtZSB9ID0gKDAsIFF1ZXJ5T3B0aW9uc1Byb3ZpZGVyXzEudXNlUXVlcnlPcHRpb25zKSgpO1xuICAgICgwLCByZWFjdF8xLnVzZUVmZmVjdCkoKCkgPT4ge1xuICAgICAgICAoMCwgbG9nXzEucmVxdWVzdExvZykobW9kZSwgdmVyYm9zaXR5LCA1LCBgW2VuZHBvaW50c11gLCBgW0NdJHtjcmVhdGVFbmRwb2ludH1gLCBgW1JdJHtyZWFkRW5kcG9pbnR9YCwgYFtVXSR7dXBkYXRlRW5kcG9pbnR9YCwgYFtEXSR7ZGVsZXRlRW5kcG9pbnR9YCk7XG4gICAgfSwgW2NyZWF0ZUVuZHBvaW50LCByZWFkRW5kcG9pbnQsIHVwZGF0ZUVuZHBvaW50LCBkZWxldGVFbmRwb2ludF0pO1xuICAgIHJldHVybiAoKDAsIGpzeF9ydW50aW1lXzEuanN4KShFcnJvckJvdW5kYXJ5XzEuZGVmYXVsdCwgeyBjaGlsZHJlbjogKDAsIGpzeF9ydW50aW1lXzEuanN4KShRdWVyeV8xLmRlZmF1bHQsIHsgcXVlcnk6IGAke3JlYWRFbmRwb2ludH1gLCBkZWxheTogZGVsYXksIG9uUmVhZDogb25SZWFkLCBjaGlsZHJlbjogKGRhdGEsIGxvYWRpbmcsIGVycm9yLCBtYW51YWxVcGRhdGUsIHF1ZXJ5UmVmcmVzaCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoKDAsIGpzeF9ydW50aW1lXzEuanN4KShyZWFjdF8xLkZyYWdtZW50LCB7IGNoaWxkcmVuOiBjaGlsZHJlbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVDcmVhdGU6IChlLCBwYXJhbXMgPSB7IG1ldGhvZDogJ1BPU1QnIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBtZXRob2QgPSAnUE9TVCcsIHBhdGhUYWlsIH0gPSBwYXJhbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSAoMCwgdXRpbF8xLmdldEZvcm1EYXRhKShlLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHtjcmVhdGVFbmRwb2ludH0vJHtwYXRoVGFpbCA/IGAke3BhdGhUYWlsfS9gIDogJyd9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwgbG9nXzEucmVxdWVzdExvZykobW9kZSwgdmVyYm9zaXR5LCAxLCBgW2NyZWF0ZV1bJHttZXRob2R9XWAsIGAke2RvbWFpbn0vJHtlbmRwb2ludH1gLCBmb3JtRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBhcGlfMS5yZXF1ZXN0KShkb21haW4sIGVuZHBvaW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGZvcm1EYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiByZXF1ZXN0TWlkZGxld2FyZT8uKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGNyZWF0ZWQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFudWFsVXBkYXRlPy4oWy4uLmRhdGEsIGNyZWF0ZWRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DcmVhdGVkPy4oKSAmJiBxdWVyeVJlZnJlc2g/LigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycmV1ciBkZSBjcsOpYXRpb25gLCBgVW5lIGVycmV1ciBlc3Qgc3VydmVudSBsb3JzIGRlIGxhIGNyw6lhdGlvbiBkYW5zIGxhIGJhc2UgZGUgZG9ubsOpZXNgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkOiB7IGRhdGEsIGxvYWRpbmcsIGVycm9yIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVVcGRhdGU6IChlLCBwYXJhbXMgPSB7IG1ldGhvZDogJ1BVVCcsIG5hbWU6IGlkTmFtZSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbWV0aG9kID0gJ1BVVCcsIHBhdGhUYWlsLCBuYW1lID0gaWROYW1lIH0gPSBwYXJhbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGFzID0gKDAsIHV0aWxfMS5mb3JtRXh0cmFjdG9yKShlLnRhcmdldCwgbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0RhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2FycmF5JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGF0YSA9IFsuLi5kYXRhXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGEgPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb21pc2VzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybURhdGFzLmZvckVhY2goKGZvcm1EYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhaWwgPSAoMCwgdXRpbF8xLmdldFBhdGhUYWlsKShmb3JtRGF0YSwgcGFyYW1ldGVyVHlwZSwgbmFtZSwgcGF0aFRhaWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmRwb2ludCA9IGAke3VwZGF0ZUVuZHBvaW50fS8ke3RhaWwgPyBgJHt0YWlsfS9gIDogJyd9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhhc0NoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2FycmF5Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBuZXdEYXRhLmZpbmRJbmRleCgodmFsKSA9PiB2YWxbbmFtZV0gPT0gdGFpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ubmV3RGF0YVtpbmRleF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmZvcm1EYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlZCA9ICEoMCwgZmFzdF9kZWVwX2VxdWFsXzEuZGVmYXVsdCkobmV3RGF0YVtpbmRleF0sIG1lcmdlZERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGFbaW5kZXhdID0gbWVyZ2VkRGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdEYXRhLnB1c2goZm9ybURhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlZCA9ICEoMCwgZmFzdF9kZWVwX2VxdWFsXzEuZGVmYXVsdCkobmV3RGF0YSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdEYXRhID0geyAuLi5uZXdEYXRhLCAuLi5mb3JtRGF0YSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwgbG9nXzEucmVxdWVzdExvZykobW9kZSwgdmVyYm9zaXR5LCAxLCBgW3VwZGF0ZV1bJHttZXRob2R9XWAsIGAke2RvbWFpbn0vJHtlbmRwb2ludH1gLCBmb3JtRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKCgwLCBhcGlfMS5yZXF1ZXN0KShkb21haW4sIGVuZHBvaW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZm9ybURhdGEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiByZXF1ZXN0TWlkZGxld2FyZT8uKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbnVhbFVwZGF0ZT8uKG5ld0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZWQ/LigpICYmIHF1ZXJ5UmVmcmVzaD8uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRGVsZXRlOiAoZSwgcGFyYW1zID0geyBtZXRob2Q6ICdERUxFVEUnLCBuYW1lOiBpZE5hbWUgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGU/LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZT8uc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBtZXRob2QgPSAnREVMRVRFJywgcGF0aFRhaWwsIG5hbWUgPSBpZE5hbWUsIGlkLCB9ID0gcGFyYW1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhaWwgPSAoMCwgdXRpbF8xLmdldFBhdGhUYWlsKSh7IFtuYW1lXTogaWQudG9TdHJpbmcoKSB9LCBwYXJhbWV0ZXJUeXBlLCBuYW1lLCBwYXRoVGFpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHtkZWxldGVFbmRwb2ludH0vJHt0YWlsfS9gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLCBsb2dfMS5yZXF1ZXN0TG9nKShtb2RlLCB2ZXJib3NpdHksIDEsIGBbZGVsZXRlXVske21ldGhvZH1dYCwgYCR7ZG9tYWlufS8ke2VuZHBvaW50fWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoMCwgYXBpXzEucmVxdWVzdCkoZG9tYWluLCBlbmRwb2ludCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHJlcXVlc3RNaWRkbGV3YXJlPy4oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2FycmF5Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBkYXRhLmZpbmRJbmRleCgodmFsKSA9PiB2YWxbbmFtZV0gPT0gaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZWREYXRhID0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLCBsb2dfMS5yZXF1ZXN0TG9nKShtb2RlLCB2ZXJib3NpdHksIDMsIGBSZW1vdmluZyBpbmRleCAke2luZGV4fWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3QXJyID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnR5cGVkRGF0YS5zbGljZSgwLCBpbmRleCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udHlwZWREYXRhLnNsaWNlKGluZGV4ICsgMSwgdHlwZWREYXRhLmxlbmd0aCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ18xLnJlcXVlc3RMb2cpKG1vZGUsIHZlcmJvc2l0eSwgNCwgYEFycmF5IHVwZGF0ZWRgLCBuZXdBcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFudWFsVXBkYXRlPy4obmV3QXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbnVhbFVwZGF0ZT8uKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRGVsZXRlZD8uKCkgJiYgcXVlcnlSZWZyZXNoPy4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sIHF1ZXJ5UmVmcmVzaCkgfSkpO1xuICAgICAgICAgICAgfSB9KSB9KSk7XG59O1xuZXhwb3J0cy5kZWZhdWx0ID0gQ1JVRDtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QganN4X3J1bnRpbWVfMSA9IHJlcXVpcmUoXCJyZWFjdC9qc3gtcnVudGltZVwiKTtcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuc2FmZS1maW5hbGx5ICovXG5jb25zdCBpbmRleF9tb2R1bGVfc2Nzc18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2luZGV4Lm1vZHVsZS5zY3NzXCIpKTtcbmNvbnN0IHJlYWN0XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcInJlYWN0XCIpKTtcbmNsYXNzIEVycm9yQm91bmRhcnkgZXh0ZW5kcyByZWFjdF8xLmRlZmF1bHQuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGhhc0Vycm9yOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiB7IGU6IHVuZGVmaW5lZCwgaW5mbzogdW5kZWZpbmVkIH0sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY29tcG9uZW50RGlkQ2F0Y2ggPSAoZSwgaW5mbykgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBoYXNFcnJvcjogdHJ1ZSwgZXJyb3I6IHsgZSwgaW5mbyB9IH0pO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHsgaGFzRXJyb3IsIGVycm9yIH0gPSB0aGlzLnN0YXRlO1xuICAgICAgICBpZiAoIWhhc0Vycm9yKVxuICAgICAgICAgICAgcmV0dXJuICgwLCBqc3hfcnVudGltZV8xLmpzeCkocmVhY3RfMS5kZWZhdWx0LkZyYWdtZW50LCB7IGNoaWxkcmVuOiBjaGlsZHJlbiB9KTtcbiAgICAgICAgcmV0dXJuICgoMCwganN4X3J1bnRpbWVfMS5qc3hzKShcImRpdlwiLCB7IGNsYXNzTmFtZTogaW5kZXhfbW9kdWxlX3Njc3NfMS5kZWZhdWx0Lm1haW4sIGNoaWxkcmVuOiBbKDAsIGpzeF9ydW50aW1lXzEuanN4KShcImRpdlwiLCB7IGNoaWxkcmVuOiBlcnJvcj8uZT8ubWVzc2FnZSB9KSwgKDAsIGpzeF9ydW50aW1lXzEuanN4KShcImhyXCIsIHt9KSwgKDAsIGpzeF9ydW50aW1lXzEuanN4KShcImRpdlwiLCB7IGNoaWxkcmVuOiBlcnJvcj8uaW5mbz8uY29tcG9uZW50U3RhY2sgfSldIH0pKTtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBFcnJvckJvdW5kYXJ5O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBqc3hfcnVudGltZV8xID0gcmVxdWlyZShcInJlYWN0L2pzeC1ydW50aW1lXCIpO1xuY29uc3QgRXJyb3JCb3VuZGFyeV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9FcnJvckJvdW5kYXJ5XCIpKTtcbmNvbnN0IFF1ZXJ5T3B0aW9uc1Byb3ZpZGVyXzEgPSByZXF1aXJlKFwiLi4vUXVlcnlPcHRpb25zUHJvdmlkZXJcIik7XG5jb25zdCByZWFjdF8xID0gcmVxdWlyZShcInJlYWN0XCIpO1xuLyoqXG4gKiBUaGUgcXVlcnkgY29tcG9uZW50IGlzIGEgZmV0Y2ggd3JhcHBlciB0aGF0IGFsbG93cyB0byBkaXJlY3RseSBhZGQgbG9naWMgaW4gdGhlIGRlc2lnbiBvZiB0aGUgcmVhY3QgRE9NIGFyY2hpdGVjdHVyZVxuICovXG5jb25zdCBRdWVyeSA9ICh7IGNoaWxkcmVuLCBxdWVyeSwgbWV0aG9kLCBkZWxheSwgYm9keSwgb25SZWFkLCB9KSA9PiB7XG4gICAgLy8gVGhlIGRlZmF1bHQgZGF0YS9sb2FkL2Vycm9yIHRyaXBsZVxuICAgIGNvbnN0IFtkYXRhTG9hZEVyciwgc2V0RGF0YUxvYWRFcnJdID0gKDAsIHJlYWN0XzEudXNlU3RhdGUpKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgbG9hZGluZzogdHJ1ZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgfSk7XG4gICAgY29uc3QgcmVxdWVzdCA9ICgwLCBRdWVyeU9wdGlvbnNQcm92aWRlcl8xLnVzZVJlcXVlc3QpKCk7XG4gICAgY29uc3QgW2NvbnRyb2xsZXIsIHNldENvbnRyb2xsZXJdID0gKDAsIHJlYWN0XzEudXNlU3RhdGUpKCk7XG4gICAgY29uc3QgW3JlZnJlc2gsIHNldFJlZnJlc2hdID0gKDAsIHJlYWN0XzEudXNlU3RhdGUpKGZhbHNlKTtcbiAgICBjb25zdCBtYW51YWxVcGRhdGUgPSAoMCwgcmVhY3RfMS51c2VDYWxsYmFjaykoKGRhdGEpID0+IHNldERhdGFMb2FkRXJyKHtcbiAgICAgICAgZGF0YSxcbiAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgIH0pLCBbZGF0YUxvYWRFcnJdKTtcbiAgICAvLyBDaGVjayBpZiB0aGUgcXVlcnkgcHJvcCBoYXMgY2hhbmdlZFxuICAgICgwLCByZWFjdF8xLnVzZUVmZmVjdCkoKCkgPT4ge1xuICAgICAgICBjb250cm9sbGVyPy5hYm9ydCgpO1xuICAgICAgICBjb25zdCBjdHJsID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICBjb25zdCB0aW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgcmVxdWVzdChxdWVyeSwge1xuICAgICAgICAgICAgICAgIHNpZ25hbDogY3RybC5zaWduYWwsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBzZXREYXRhTG9hZEVycih7IGRhdGE6IHJlcywgbG9hZGluZzogZmFsc2UsIGVycm9yOiBudWxsIH0pO1xuICAgICAgICAgICAgICAgIG9uUmVhZD8uKHJlcyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVyci5uYW1lID09ICdBYm9ydEVycm9yJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNldERhdGFMb2FkRXJyKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnIudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCBkZWxheSA/PyAwKTtcbiAgICAgICAgc2V0Q29udHJvbGxlcihjdHJsKTtcbiAgICAgICAgc2V0RGF0YUxvYWRFcnIoeyBkYXRhOiBudWxsLCBsb2FkaW5nOiB0cnVlLCBlcnJvcjogbnVsbCB9KTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGN0cmw/LmFib3J0KCk7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICB9O1xuICAgIH0sIFtxdWVyeSwgcmVmcmVzaF0pO1xuICAgIHJldHVybiAoKDAsIGpzeF9ydW50aW1lXzEuanN4KShFcnJvckJvdW5kYXJ5XzEuZGVmYXVsdCwgeyBjaGlsZHJlbjogY2hpbGRyZW4oZGF0YUxvYWRFcnIuZGF0YSwgZGF0YUxvYWRFcnIubG9hZGluZywgZGF0YUxvYWRFcnIuZXJyb3IsIG1hbnVhbFVwZGF0ZSwgKCkgPT4gc2V0UmVmcmVzaCghcmVmcmVzaCkpIH0pKTtcbn07XG5leHBvcnRzLmRlZmF1bHQgPSBRdWVyeTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5RdWVyeU9wdGlvbnNQcm92aWRlciA9IGV4cG9ydHMudXNlUmVxdWVzdCA9IGV4cG9ydHMudXNlUXVlcnlPcHRpb25zID0gdm9pZCAwO1xuY29uc3QgYXBpXzEgPSByZXF1aXJlKFwiLi4vLi4vLi4vdXRpbHMvYXBpXCIpO1xuY29uc3QgcmVhY3RfMSA9IHJlcXVpcmUoXCJyZWFjdFwiKTtcbmNvbnN0IHF1ZXJ5T3B0aW9uc0NvbnRleHQgPSAoMCwgcmVhY3RfMS5jcmVhdGVDb250ZXh0KSh7XG4gICAgZG9tYWluOiAnJyxcbiAgICBwYXJhbWV0ZXJUeXBlOiAncGF0aCcsXG4gICAgbW9kZTogJ3Byb2R1Y3Rpb24nLFxuICAgIHZlcmJvc2l0eTogMSxcbiAgICBpZE5hbWU6ICdpZCcsXG59KTtcbmNvbnN0IHVzZVF1ZXJ5T3B0aW9ucyA9ICgpID0+IHtcbiAgICBjb25zdCBjdHggPSAoMCwgcmVhY3RfMS51c2VDb250ZXh0KShxdWVyeU9wdGlvbnNDb250ZXh0KTtcbiAgICBpZiAoIWN0eClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gY29udGV4dCBmb3IgJ3VzZVF1ZXJ5T3B0aW9ucydcIik7XG4gICAgaWYgKCFjdHguaWROYW1lKVxuICAgICAgICBjdHguaWROYW1lID0gJ2lkJztcbiAgICByZXR1cm4gY3R4O1xufTtcbmV4cG9ydHMudXNlUXVlcnlPcHRpb25zID0gdXNlUXVlcnlPcHRpb25zO1xuY29uc3QgdXNlUmVxdWVzdCA9ICgpID0+IHtcbiAgICBjb25zdCB7IGRvbWFpbiwgbW9kZTogcU1vZGUsIHJlcXVlc3RNaWRkbGV3YXJlOiBxUmVxdWVzdE1pZGRsZXdhcmUsIH0gPSAoMCwgZXhwb3J0cy51c2VRdWVyeU9wdGlvbnMpKCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChwYXRoLCBvcHRpb25zID0geyBtZXRob2Q6ICdHRVQnIH0pIHtcbiAgICAgICAgY29uc3QgeyBoZWFkZXJzID0gcVJlcXVlc3RNaWRkbGV3YXJlKCksIGJvZHksIG1ldGhvZCA9ICdHRVQnLCBtb2RlID0gcU1vZGUsIHNpZ25hbCwgfSA9IG9wdGlvbnM7XG4gICAgICAgIHJldHVybiAoMCwgYXBpXzEucmVxdWVzdCkoZG9tYWluLCBwYXRoLCB7IGJvZHksIGhlYWRlcnMsIG1ldGhvZCwgbW9kZSwgc2lnbmFsIH0pO1xuICAgIH07XG59O1xuZXhwb3J0cy51c2VSZXF1ZXN0ID0gdXNlUmVxdWVzdDtcbmV4cG9ydHMuUXVlcnlPcHRpb25zUHJvdmlkZXIgPSBxdWVyeU9wdGlvbnNDb250ZXh0LlByb3ZpZGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnVzZVF1ZXJ5T3B0aW9ucyA9IGV4cG9ydHMudXNlUmVxdWVzdCA9IGV4cG9ydHMucmVxdWVzdCA9IGV4cG9ydHMuUXVlcnlPcHRpb25zUHJvdmlkZXIgPSBleHBvcnRzLlF1ZXJ5ID0gZXhwb3J0cy5DUlVEID0gdm9pZCAwO1xuY29uc3QgQ1JVRF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvdXRpbHMvQ1JVRFwiKSk7XG5leHBvcnRzLkNSVUQgPSBDUlVEXzEuZGVmYXVsdDtcbmNvbnN0IFF1ZXJ5XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vY29tcG9uZW50cy91dGlscy9RdWVyeVwiKSk7XG5leHBvcnRzLlF1ZXJ5ID0gUXVlcnlfMS5kZWZhdWx0O1xuY29uc3QgUXVlcnlPcHRpb25zUHJvdmlkZXJfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvdXRpbHMvUXVlcnlPcHRpb25zUHJvdmlkZXJcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJRdWVyeU9wdGlvbnNQcm92aWRlclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gUXVlcnlPcHRpb25zUHJvdmlkZXJfMS5RdWVyeU9wdGlvbnNQcm92aWRlcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInVzZVF1ZXJ5T3B0aW9uc1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gUXVlcnlPcHRpb25zUHJvdmlkZXJfMS51c2VRdWVyeU9wdGlvbnM7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ1c2VSZXF1ZXN0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBRdWVyeU9wdGlvbnNQcm92aWRlcl8xLnVzZVJlcXVlc3Q7IH0gfSk7XG5jb25zdCBhcGlfMSA9IHJlcXVpcmUoXCIuL3V0aWxzL2FwaVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInJlcXVlc3RcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFwaV8xLnJlcXVlc3Q7IH0gfSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucmVxdWVzdCA9IHZvaWQgMDtcbmNvbnN0IGxvZ18xID0gcmVxdWlyZShcIi4vbG9nXCIpO1xuY29uc3QgcmVxdWVzdCA9IGZ1bmN0aW9uIChkb21haW4sIHBhdGgsIG9wdGlvbnMgPSB7IG1ldGhvZDogJ0dFVCcgfSkge1xuICAgIGNvbnN0IHsgYm9keSwgbWV0aG9kID0gJ0dFVCcsIGhlYWRlcnMsIG1vZGUgPSAncHJvZHVjdGlvbicsIHNpZ25hbCwgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgcmVxID0gKGhlYWRlcnMpID0+IHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke2RvbWFpbn0vJHtwYXRofWAsIHtcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnRleHQoKS50aGVuKCh0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVycz8uWydDb250ZW50LVR5cGUnXSA9PSAnYXBwbGljYXRpb24vanNvbicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICgwLCBsb2dfMS5xdWVyeVdhcm4pKG1vZGUsIDAsIDAsIGBDb3VsZCBub3QgcGFyc2UgcmVzcG9uc2UgdG8ganNvbmAsIHJlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBQcm9taXNlLnJlamVjdChyZXMpO1xuICAgICAgICB9LCAocmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBpZiAocmVqZWN0Lm5hbWUgPT0gJ0Fib3J0RXJyb3InKVxuICAgICAgICAgICAgICAgICgwLCBsb2dfMS5xdWVyeVdhcm4pKG1vZGUsIDAsIDAsIHJlamVjdC5tZXNzYWdlKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAoMCwgbG9nXzEucXVlcnlFcnJvcikocmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gaGVhZGVycyA/IGhlYWRlcnMudGhlbihyZXEpIDogcmVxKHt9KTtcbn07XG5leHBvcnRzLnJlcXVlc3QgPSByZXF1ZXN0O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnF1ZXJ5RXJyb3IgPSBleHBvcnRzLnF1ZXJ5V2FybiA9IGV4cG9ydHMucmVxdWVzdExvZyA9IHZvaWQgMDtcbmNvbnN0IHJlcXVlc3RMb2cgPSAobW9kZSwgcGFyYW1WZXJib3NpdHksIGxpbWl0VmVyYm9zaXR5LCAuLi5zKSA9PiB7XG4gICAgaWYgKG1vZGUgPT0gJ2RldmVsb3BtZW50JyAmJiBsaW1pdFZlcmJvc2l0eSA8PSBwYXJhbVZlcmJvc2l0eSlcbiAgICAgICAgY29uc29sZS5sb2coYFtyZWFjdC1xdWVyeV1gLCAuLi5zKTtcbn07XG5leHBvcnRzLnJlcXVlc3RMb2cgPSByZXF1ZXN0TG9nO1xuY29uc3QgcXVlcnlXYXJuID0gKG1vZGUsIHBhcmFtVmVyYm9zaXR5LCBsaW1pdFZlcmJvc2l0eSwgLi4ucykgPT4ge1xuICAgIGlmIChtb2RlID09ICdkZXZlbG9wbWVudCcgJiYgbGltaXRWZXJib3NpdHkgPD0gcGFyYW1WZXJib3NpdHkpXG4gICAgICAgIGNvbnNvbGUud2FybihgW3JlYWN0LXF1ZXJ5XWAsIC4uLnMpO1xufTtcbmV4cG9ydHMucXVlcnlXYXJuID0gcXVlcnlXYXJuO1xuY29uc3QgcXVlcnlFcnJvciA9ICguLi5zKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihgW3JlYWN0LXF1ZXJ5XWAsIC4uLnMpO1xufTtcbmV4cG9ydHMucXVlcnlFcnJvciA9IHF1ZXJ5RXJyb3I7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMudXNlRm9yY2VVcGRhdGUgPSBleHBvcnRzLmdldFBhdGhUYWlsID0gZXhwb3J0cy5zZXBlcmF0ZSA9IGV4cG9ydHMuc2VwZXJhdGVBbmRLZWVwSWRzID0gZXhwb3J0cy5mb3JtRXh0cmFjdG9yID0gZXhwb3J0cy5nZXRGb3JtRGF0YSA9IHZvaWQgMDtcbmNvbnN0IHJlYWN0XzEgPSByZXF1aXJlKFwicmVhY3RcIik7XG4vKipcbiAqIGdldEZvcm1EYXRhIGV4dHJhY3RzIHRoZSB2YWx1ZXMgb2YgdGhlIGlucHV0IGVsZW1lbnRzXG4gKiByZWNlaXZlZCBmcm9tIHRoZSB0YXJnZXQgb2JqZWN0XG4gKiBAcGFyYW0gdGFyZ2V0IFRhcmdldCByZWNlaXZlZCBmcm9tIHRoZSBvYmplY3QgZXZlbnRcbiAqIEByZXR1cm5zIEFuIG9iamVjdCBvZiB0eXBlIFQgYnkgZGVmYXVsdCB3aXRoIGtleSB2YWx1ZSBwYWlyc1xuICovXG5jb25zdCBnZXRGb3JtRGF0YSA9ICh0YXJnZXQpID0+IHtcbiAgICBjb25zdCB0eXBlZFRhcmdldCA9IHRhcmdldDtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGFyZ2V0KVxuICAgICAgICAubWFwKChrKSA9PiB7XG4gICAgICAgIHJldHVybiB0eXBlZFRhcmdldFtrXTtcbiAgICB9KVxuICAgICAgICAvLyBLZWVwIG5hbWVkIGlucHV0IGFuZCBzZWxlY3RcbiAgICAgICAgLmZpbHRlcigodikgPT4ge1xuICAgICAgICBjb25zdCB0YWcgPSB2LnRhZ05hbWU/LnRvTG9jYWxlTG93ZXJDYXNlPy4oKTtcbiAgICAgICAgcmV0dXJuIHYubmFtZSAmJiAodGFnID09ICdpbnB1dCcgfHwgdGFnID09ICdzZWxlY3QnKTtcbiAgICB9KVxuICAgICAgICAucmVkdWNlKChhY2MsIGN1cikgPT4ge1xuICAgICAgICBjb25zdCB7IG5hbWUsIHZhbHVlLCBjaGVja2VkLCB0eXBlLCByZXF1aXJlZCB9ID0gY3VyO1xuICAgICAgICBjb25zdCBpc0NoZWNrYm94ID0gdHlwZSA9PSAnY2hlY2tib3gnO1xuICAgICAgICBjb25zdCBpc1ZhbEVtcHR5ID0gdmFsdWUgPT0gJycgfHwgdmFsdWUgPT0gbnVsbDtcbiAgICAgICAgaWYgKHJlcXVpcmVkICYmIGlzVmFsRW1wdHkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IHVzZSBhbiBlbXB0eSB2YWx1ZSBmb3IgJHtuYW1lfWApO1xuICAgICAgICBsZXQgZmluYWxWYWx1ZSA9IHR5cGUgPT0gJ251bWJlcicgPyBuZXcgTnVtYmVyKHZhbHVlKS52YWx1ZU9mKCkgOiB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmFjYyxcbiAgICAgICAgICAgIFtuYW1lXTogaXNDaGVja2JveCA/IGNoZWNrZWQgOiBmaW5hbFZhbHVlLFxuICAgICAgICB9O1xuICAgIH0sIHt9KTtcbn07XG5leHBvcnRzLmdldEZvcm1EYXRhID0gZ2V0Rm9ybURhdGE7XG4vKipcbiAqIEV4dHJhY3RzIGFsbCB0aGUgbmVjZXNzYXJ5IGRhdGEgZnJvbSB0aGUgZm9ybSB0YXJnZXRcbiAqXG4gKiBAcGFyYW0gdGFyZ2V0IFRhcmdldCByZWNlaXZlZCBmcm9tIHRoZSBvYmplY3QgZXZlbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIHRoYXQgaWRlbnRpZmllcyB0aGUgZGF0YVxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogZm9ybUV4dHJhY3RvciB3aXRoIGZvcm0gaW5wdXRzXG4gKiBgYGBodG1sXG4gKiA8ZGl2PlxuICogIDxpbnB1dCBuYW1lPVwiaWQtMVwiIC8+XG4gKiAgPGlucHV0IG5hbWU9XCJhZGRyZXNzLTFcIiB2YWx1ZT1cIjIgSGFybGV5IHN0cmVldFwiIC8+XG4gKiA8L2Rpdj5cbiAqIC4uLlxuICogPGRpdj5cbiAqICA8aW5wdXQgbmFtZT1cImlkLW5cIiAvPlxuICogIDxpbnB1dCBuYW1lPVwiYWRkcmVzcy1uXCIgdmFsdWU9XCIzNSBydWUgY2hhbXBzIMOpbHlzw6llc1wiIC8+XG4gKiA8L2Rpdj5cbiAqIGBgYFxuICogYGBgdHlwZXNjcmlwdFxuICogZm9ybUV4dHJhY3Rvcih0YXJnZXQsIFtcImlkXCJdKTtcbiAqIC8vIFtcbiAqIC8vICB7aWQ6IFwiMVwiLCBhZGRyZXNzOiBcIjIgSGFybGV5IHN0cmVldFwifSxcbiAqIC8vICAuLi4sXG4gKiAvLyAge2lkOiBcIm5cIiwgYWRkcmVzczogXCIzNSBydWUgY2hhbXBzIMOpbHlzw6llc1wifVxuICogLy8gXVxuICogYGBgXG4gKlxuICogQHJldHVybnMge0Zvcm1FeHRyYWN0b3JEYXRhfSBGb3JtRXh0cmFjb3JEYXRhXG4gKi9cbmNvbnN0IGZvcm1FeHRyYWN0b3IgPSAodGFyZ2V0LCBuYW1lKSA9PiB7XG4gICAgLy8gR2V0IGFsbCB0aGUgZGF0YSBmcm9tIHRoZSBmb3JtXG4gICAgY29uc3QgZm9ybURhdGEgPSAoMCwgZXhwb3J0cy5nZXRGb3JtRGF0YSkodGFyZ2V0KTtcbiAgICAvLyBTaW1wbHkgY2hlY2sgaWYgdGhlcmUgaXMgbm8gaWQgZm9yIGVhY2ggZm9ybURhdGFcbiAgICBpZiAoZm9ybURhdGFbbmFtZV0gIT0gbnVsbClcbiAgICAgICAgcmV0dXJuIFtmb3JtRGF0YV07XG4gICAgLy8gRWFjaCBmb3JtRGF0YSBpcyBzcGVjaWZpYyB0byBhbiBpZFxuICAgIGNvbnN0IHZhbHVlcyA9IE9iamVjdC5lbnRyaWVzKGZvcm1EYXRhKTtcbiAgICByZXR1cm4gdmFsdWVzLnJlZHVjZSgocHJldiwgY3VycikgPT4ge1xuICAgICAgICBjb25zdCBrZXkgPSBjdXJyWzBdO1xuICAgICAgICBjb25zdCBbYXR0ciwgaWRdID0gKDAsIGV4cG9ydHMuc2VwZXJhdGVBbmRLZWVwSWRzKShba2V5XSlbMF07XG4gICAgICAgIGNvbnN0IGVsZW0gPSBwcmV2LmZpbmQoKGVsZW0pID0+IGVsZW1bbmFtZV0gPT0gaWQpO1xuICAgICAgICBsZXQgcGFyc2VJZCA9IGlkO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcGFyc2VJZCA9IHBhcnNlSW50KGlkKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgIGlmIChlbGVtKVxuICAgICAgICAgICAgZWxlbVthdHRyXSA9IGN1cnJbMV07XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHByZXYucHVzaCh7IFtuYW1lXTogcGFyc2VJZCwgW2F0dHJdOiBjdXJyWzFdIH0pO1xuICAgICAgICByZXR1cm4gcHJldjtcbiAgICB9LCBbXSk7XG59O1xuZXhwb3J0cy5mb3JtRXh0cmFjdG9yID0gZm9ybUV4dHJhY3Rvcjtcbi8qKlxuICogUmVncm91cCBzdHJpbmdzIGJhc2VkIG9uIHRoZWlyIGlkcyByZXByZXNlbnRlZCBieSB0aGUgbGFzdCBzZXBlcmF0aW9uIG9mIHRoZSBzdHJpbmdcbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIHNlcGVyYXRlQW5kS2VlcElkcyhcImhlbGxvV29ybGQ1XCIsXCJoZWxsby13b3JsZDZcIiwgXCJoZWxsb1dvcmxkN1wiLCBcImhlbGxvV29ybGRcIik7XG4gKiAvLyBbW1wiaGVsbG9Xb3JsZFwiLCBcIjVcIl0sIFtcImhlbGxvLXdvcmxkXCIsIFwiNlwiXSwgW1wiaGVsbG9Xb3JsZFwiLCBcIjdcIl0sIFtcImhlbGxvXCIsIFwiV29ybGRcIl1dXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gc3RycyBUaGUgc3RyaW5nIGFycmF5IHRvIHNlYXJjaCBmb3IgaWRzIGFuZCByZWdyb3VwIGFsbCBhdHRyaWJ1dGVzIHdpdGggdGhlIHNhbWUgaWRzXG4gKiBAcmV0dXJucyBBbmQgYXJyYXkgb2YgYXJyYXlzIGVhY2ggY29udGFpbmluZyB0aGUgcGFyc2VkIG5hbWUgYW5kIGlkIG9mIHRoZSBzdHJpbmdcbiAqL1xuY29uc3Qgc2VwZXJhdGVBbmRLZWVwSWRzID0gKHN0cnMpID0+IHtcbiAgICByZXR1cm4gKDAsIGV4cG9ydHMuc2VwZXJhdGUpKHN0cnMpLm1hcCgodikgPT4ge1xuICAgICAgICBjb25zdCBzZXBlcmF0ZWQgPSB2WzFdO1xuICAgICAgICBjb25zdCBpZCA9IHNlcGVyYXRlZFtzZXBlcmF0ZWQubGVuZ3RoIC0gMV07XG4gICAgICAgIHJldHVybiBbdlswXS5yZXBsYWNlKG5ldyBSZWdFeHAoYCgtfF8pPyR7aWR9JGApLCAnJyksIGlkXTtcbiAgICB9KTtcbn07XG5leHBvcnRzLnNlcGVyYXRlQW5kS2VlcElkcyA9IHNlcGVyYXRlQW5kS2VlcElkcztcbi8qKlxuICogVGhpcyBmdW5jdGlvbiBzZXBlcmF0ZXMgc3RyaW5ncyBiYXNlZCBvbiBzcGVjaWFsIGNoYXJhY3RlcnMgLyBjYXNlXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBzZXBlcmF0ZShbXCJoZWxsby13b3JsZFwiLCBcImhlbGxvV29ybGQyXCIsIFwiaGVsbG9fd29ybGRfMlwiXSlcbiAqIC8vIFtcbiAqIC8vICAgW1wiaGVsbG8td29ybGRcIiwgW1wiaGVsbG9cIixcIndvcmxkXCJdXSxcbiAqIC8vICAgW1wiaGVsbG9Xb3JsZDJcIiwgW1wiaGVsbG9cIixcIndvcmxkXCIsIFwiMlwiXV0sXG4gKiAvLyAgIFtcImhlbGxvX3dvcmxkXzJcIiwgW1wiaGVsbG9cIiwgXCJ3b3JsZFwiLCBcIjJcIl1dXG4gKiAvLyBdXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gc3RycyBUaGUgc3RyaW5nIGFycmF5IHRvIHRyeSBzZXBlcmF0ZVxuICogQHJldHVybnMgQW4gYXJyYXkgb2YgYXJyYXlzIHdpdGggdGhlIGlucHV0IC8gb3V0cHV0IHN0cmluZ3NcbiAqL1xuY29uc3Qgc2VwZXJhdGUgPSAoc3RycykgPT4ge1xuICAgIHJldHVybiBzdHJzLm1hcCgoc3RyKSA9PiB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBzdHIsXG4gICAgICAgICAgICBzdHJcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvKFswLTldKykvLCAnICQxJylcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvKC18XykvZywgJyAnKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oW0EtWl0pL2csICcgJDEnKVxuICAgICAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAgICAgICAudG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgIC5zcGxpdCgnICcpXG4gICAgICAgICAgICAgICAgLmZpbHRlcigocykgPT4gcyAhPSAnJyksXG4gICAgICAgIF07XG4gICAgfSk7XG59O1xuZXhwb3J0cy5zZXBlcmF0ZSA9IHNlcGVyYXRlO1xuY29uc3QgZ2V0UGF0aFRhaWwgPSAoZGF0YSwgdHlwZSwgbmFtZSwgcGF0aFRhaWwpID0+IHtcbiAgICBjb25zdCBpZCA9IGRhdGFbbmFtZV07XG4gICAgaWYgKHR5cGUgPT0gJ3BhdGgnICYmIGlkICE9ICcnICYmIGlkICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aFRhaWw7XG59O1xuZXhwb3J0cy5nZXRQYXRoVGFpbCA9IGdldFBhdGhUYWlsO1xuY29uc3QgdXNlRm9yY2VVcGRhdGUgPSAoKSA9PiB7XG4gICAgcmV0dXJuICgwLCByZWFjdF8xLnVzZVJlZHVjZXIpKCgpID0+ICh7fSksIHt9KVsxXTtcbn07XG5leHBvcnRzLnVzZUZvcmNlVXBkYXRlID0gdXNlRm9yY2VVcGRhdGU7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8vIGRvIG5vdCBlZGl0IC5qcyBmaWxlcyBkaXJlY3RseSAtIGVkaXQgc3JjL2luZGV4LmpzdFxuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlcXVhbChhLCBiKSB7XG4gIGlmIChhID09PSBiKSByZXR1cm4gdHJ1ZTtcblxuICBpZiAoYSAmJiBiICYmIHR5cGVvZiBhID09ICdvYmplY3QnICYmIHR5cGVvZiBiID09ICdvYmplY3QnKSB7XG4gICAgaWYgKGEuY29uc3RydWN0b3IgIT09IGIuY29uc3RydWN0b3IpIHJldHVybiBmYWxzZTtcblxuICAgIHZhciBsZW5ndGgsIGksIGtleXM7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYSkpIHtcbiAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCAhPSBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KVxuICAgICAgICBpZiAoIWVxdWFsKGFbaV0sIGJbaV0pKSByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cblxuXG4gICAgaWYgKGEuY29uc3RydWN0b3IgPT09IFJlZ0V4cCkgcmV0dXJuIGEuc291cmNlID09PSBiLnNvdXJjZSAmJiBhLmZsYWdzID09PSBiLmZsYWdzO1xuICAgIGlmIChhLnZhbHVlT2YgIT09IE9iamVjdC5wcm90b3R5cGUudmFsdWVPZikgcmV0dXJuIGEudmFsdWVPZigpID09PSBiLnZhbHVlT2YoKTtcbiAgICBpZiAoYS50b1N0cmluZyAhPT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZykgcmV0dXJuIGEudG9TdHJpbmcoKSA9PT0gYi50b1N0cmluZygpO1xuXG4gICAga2V5cyA9IE9iamVjdC5rZXlzKGEpO1xuICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIGlmIChsZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KVxuICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwga2V5c1tpXSkpIHJldHVybiBmYWxzZTtcblxuICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOykge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG5cbiAgICAgIGlmICghZXF1YWwoYVtrZXldLCBiW2tleV0pKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyB0cnVlIGlmIGJvdGggTmFOLCBmYWxzZSBvdGhlcndpc2VcbiAgcmV0dXJuIGEhPT1hICYmIGIhPT1iO1xufTtcbiIsIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IGRlZmF1bHQge1wiYnV0dG9uLWRlZmF1bHRcIjpcIk4zNG9hRGdIdEpscHRxeFZ2OVBuXCIsXCJidXR0b24tc2VsZWN0ZWRcIjpcIkphMG92T19oM2VhRXNhYm9xREM3XCIsXCJidXR0b24tcHJpbWFyeVwiOlwiS1RmdUxFN0xuU0dSSERGUEQwRUFcIixcImJ1dHRvbi12YWxpZGF0ZVwiOlwialk5TUlIeU83VDhXX1FOcGZ4MGtcIixcImJ1dHRvbi1pbnZlcnNlXCI6XCJtNDB3Ym51Smg2N1h4bVljdEpMUlwiLFwiYnV0dG9uLWlnbm9yZVwiOlwiWmVJamhMVnZ3MEpxanVSOGtZalRcIixcImJ1dHRvbi1pbnZhbGlkXCI6XCJaZWRqZURrRnpvNkpjQUd4eVpQblwiLFwiYnV0dG9uLXZhbGlkXCI6XCJKazdmNzZYcFA3U0xEOTJMdm1NM1wiLFwibWFpblwiOlwiU0lBcHhRelFsWnAwTDFnTjBfUVdcIn07IiwiLyoqXG4gKiBAbGljZW5zZSBSZWFjdFxuICogcmVhY3QtanN4LXJ1bnRpbWUucHJvZHVjdGlvbi5taW4uanNcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO3ZhciBmPXJlcXVpcmUoXCJyZWFjdFwiKSxrPVN5bWJvbC5mb3IoXCJyZWFjdC5lbGVtZW50XCIpLGw9U3ltYm9sLmZvcihcInJlYWN0LmZyYWdtZW50XCIpLG09T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxuPWYuX19TRUNSRVRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQuUmVhY3RDdXJyZW50T3duZXIscD17a2V5OiEwLHJlZjohMCxfX3NlbGY6ITAsX19zb3VyY2U6ITB9O1xuZnVuY3Rpb24gcShjLGEsZyl7dmFyIGIsZD17fSxlPW51bGwsaD1udWxsO3ZvaWQgMCE9PWcmJihlPVwiXCIrZyk7dm9pZCAwIT09YS5rZXkmJihlPVwiXCIrYS5rZXkpO3ZvaWQgMCE9PWEucmVmJiYoaD1hLnJlZik7Zm9yKGIgaW4gYSltLmNhbGwoYSxiKSYmIXAuaGFzT3duUHJvcGVydHkoYikmJihkW2JdPWFbYl0pO2lmKGMmJmMuZGVmYXVsdFByb3BzKWZvcihiIGluIGE9Yy5kZWZhdWx0UHJvcHMsYSl2b2lkIDA9PT1kW2JdJiYoZFtiXT1hW2JdKTtyZXR1cm57JCR0eXBlb2Y6ayx0eXBlOmMsa2V5OmUscmVmOmgscHJvcHM6ZCxfb3duZXI6bi5jdXJyZW50fX1leHBvcnRzLkZyYWdtZW50PWw7ZXhwb3J0cy5qc3g9cTtleHBvcnRzLmpzeHM9cTtcbiIsIid1c2Ugc3RyaWN0JztcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Nqcy9yZWFjdC1qc3gtcnVudGltZS5wcm9kdWN0aW9uLm1pbi5qcycpO1xufSBlbHNlIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Nqcy9yZWFjdC1qc3gtcnVudGltZS5kZXZlbG9wbWVudC5qcycpO1xufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xNTZfXzsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNzYpO1xuIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMTU2X18iLCJfX2ltcG9ydERlZmF1bHQiLCJ0aGlzIiwibW9kIiwiX19lc01vZHVsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJqc3hfcnVudGltZV8xIiwiYXBpXzEiLCJsb2dfMSIsInV0aWxfMSIsIkVycm9yQm91bmRhcnlfMSIsIlF1ZXJ5XzEiLCJRdWVyeU9wdGlvbnNQcm92aWRlcl8xIiwiZmFzdF9kZWVwX2VxdWFsXzEiLCJyZWFjdF8xIiwiY2hpbGRyZW4iLCJlbmRQb2ludHMiLCJvbkNyZWF0ZWQiLCJvblJlYWQiLCJvblVwZGF0ZWQiLCJvbkRlbGV0ZWQiLCJkZWxheSIsInR5cGUiLCJjcmVhdGVFbmRwb2ludCIsInJlYWRFbmRwb2ludCIsInVwZGF0ZUVuZHBvaW50IiwiZGVsZXRlRW5kcG9pbnQiLCJBcnJheSIsImZpbGwiLCJjcmVhdGUiLCJyZWFkIiwidXBkYXRlIiwiZGVsZXRlIiwicGFyYW1ldGVyVHlwZSIsImRvbWFpbiIsInJlcXVlc3RNaWRkbGV3YXJlIiwibW9kZSIsInZlcmJvc2l0eSIsImlkTmFtZSIsInVzZVF1ZXJ5T3B0aW9ucyIsInVzZUVmZmVjdCIsInJlcXVlc3RMb2ciLCJqc3giLCJkZWZhdWx0IiwicXVlcnkiLCJkYXRhIiwibG9hZGluZyIsImVycm9yIiwibWFudWFsVXBkYXRlIiwicXVlcnlSZWZyZXNoIiwiRnJhZ21lbnQiLCJoYW5kbGVDcmVhdGUiLCJlIiwicGFyYW1zIiwibWV0aG9kIiwicHJldmVudERlZmF1bHQiLCJwYXRoVGFpbCIsImZvcm1EYXRhIiwiZ2V0Rm9ybURhdGEiLCJ0YXJnZXQiLCJlbmRwb2ludCIsInJlcXVlc3QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImhlYWRlcnMiLCJ0aGVuIiwiY3JlYXRlZCIsImNhdGNoIiwiY29uc29sZSIsImhhbmRsZVVwZGF0ZSIsIm5hbWUiLCJmb3JtRGF0YXMiLCJmb3JtRXh0cmFjdG9yIiwibmV3RGF0YSIsInByb21pc2VzIiwiZm9yRWFjaCIsInRhaWwiLCJnZXRQYXRoVGFpbCIsImhhc0NoYW5nZWQiLCJpbmRleCIsImZpbmRJbmRleCIsInZhbCIsInVuZGVmaW5lZCIsIm1lcmdlZERhdGEiLCJwdXNoIiwiUHJvbWlzZSIsImFsbCIsImhhbmRsZURlbGV0ZSIsInN0b3BQcm9wYWdhdGlvbiIsImlkIiwidG9TdHJpbmciLCJ0eXBlZERhdGEiLCJuZXdBcnIiLCJzbGljZSIsImxlbmd0aCIsImluZGV4X21vZHVsZV9zY3NzXzEiLCJFcnJvckJvdW5kYXJ5IiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJzdXBlciIsImFyZ3VtZW50cyIsInN0YXRlIiwiaGFzRXJyb3IiLCJpbmZvIiwiY29tcG9uZW50RGlkQ2F0Y2giLCJzZXRTdGF0ZSIsInJlbmRlciIsInByb3BzIiwianN4cyIsImNsYXNzTmFtZSIsIm1haW4iLCJtZXNzYWdlIiwiY29tcG9uZW50U3RhY2siLCJkYXRhTG9hZEVyciIsInNldERhdGFMb2FkRXJyIiwidXNlU3RhdGUiLCJ1c2VSZXF1ZXN0IiwiY29udHJvbGxlciIsInNldENvbnRyb2xsZXIiLCJyZWZyZXNoIiwic2V0UmVmcmVzaCIsInVzZUNhbGxiYWNrIiwiYWJvcnQiLCJjdHJsIiwiQWJvcnRDb250cm9sbGVyIiwidGltZW91dCIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJzaWduYWwiLCJyZXMiLCJlcnIiLCJjbGVhclRpbWVvdXQiLCJRdWVyeU9wdGlvbnNQcm92aWRlciIsInF1ZXJ5T3B0aW9uc0NvbnRleHQiLCJjcmVhdGVDb250ZXh0IiwiY3R4IiwidXNlQ29udGV4dCIsIkVycm9yIiwicU1vZGUiLCJxUmVxdWVzdE1pZGRsZXdhcmUiLCJwYXRoIiwib3B0aW9ucyIsIlByb3ZpZGVyIiwiUXVlcnkiLCJDUlVEIiwiQ1JVRF8xIiwiZW51bWVyYWJsZSIsImdldCIsInJlcSIsImZldGNoIiwib2siLCJ0ZXh0IiwidCIsInBhcnNlIiwicXVlcnlXYXJuIiwicmVqZWN0IiwicXVlcnlFcnJvciIsInBhcmFtVmVyYm9zaXR5IiwibGltaXRWZXJib3NpdHkiLCJzIiwibG9nIiwid2FybiIsInVzZUZvcmNlVXBkYXRlIiwic2VwZXJhdGUiLCJzZXBlcmF0ZUFuZEtlZXBJZHMiLCJ0eXBlZFRhcmdldCIsImtleXMiLCJtYXAiLCJrIiwiZmlsdGVyIiwidiIsInRhZyIsInRhZ05hbWUiLCJ0b0xvY2FsZUxvd2VyQ2FzZSIsInJlZHVjZSIsImFjYyIsImN1ciIsImNoZWNrZWQiLCJyZXF1aXJlZCIsImlzQ2hlY2tib3giLCJmaW5hbFZhbHVlIiwiTnVtYmVyIiwidmFsdWVPZiIsImVudHJpZXMiLCJwcmV2IiwiY3VyciIsImtleSIsImF0dHIiLCJlbGVtIiwiZmluZCIsInBhcnNlSWQiLCJwYXJzZUludCIsInN0cnMiLCJzZXBlcmF0ZWQiLCJyZXBsYWNlIiwiUmVnRXhwIiwic3RyIiwidHJpbSIsInNwbGl0IiwidXNlUmVkdWNlciIsImVxdWFsIiwiYSIsImIiLCJpIiwiaXNBcnJheSIsInNvdXJjZSIsImZsYWdzIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZiIsIlN5bWJvbCIsImZvciIsImwiLCJtIiwibiIsIl9fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEIiwiUmVhY3RDdXJyZW50T3duZXIiLCJwIiwicmVmIiwiX19zZWxmIiwiX19zb3VyY2UiLCJxIiwiYyIsImciLCJkIiwiaCIsImRlZmF1bHRQcm9wcyIsIiQkdHlwZW9mIiwiX293bmVyIiwiY3VycmVudCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkZWZpbml0aW9uIiwibyIsIm9iaiIsInByb3AiLCJyIiwidG9TdHJpbmdUYWciXSwic291cmNlUm9vdCI6IiJ9