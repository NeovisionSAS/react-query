/*! For license information please see module.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports["react-query"]=t(require("react")):e["react-query"]=t(e.react)}(self,(e=>(()=>{"use strict";var t={215:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(893),a=r(616),s=r(581),u=r(187),d=o(r(434)),i=o(r(324)),l=r(759),c=o(r(63)),f=r(156);t.default=({children:e,endPoints:t,onCreated:r,onRead:o,onUpdated:p,onDeleted:y,delay:h,type:m="array"})=>{const[g,v,b,O]="string"==typeof t?new Array(4).fill(t):[t.create,t.read,t.update,t.delete],{parameterType:_,domain:j,requestMiddleware:x,mode:P,verbosity:E,idName:$}=(0,l.useQueryOptions)();return(0,f.useEffect)((()=>{(0,s.queryLog)(P,E,4,"[endpoints]",`[C]${g}`,`[R]${v}`,`[U]${b}`,`[D]${O}`)}),[g,v,b,O]),(0,n.jsx)(d.default,{children:(0,n.jsx)(i.default,{query:`${v}`,delay:h,onRead:o,children:(t,o,d,i,l)=>(0,n.jsx)(f.Fragment,{children:e({handleCreate:(e,o={method:"POST"})=>{e.preventDefault();const{method:n="POST",pathTail:d}=o,c=(0,u.getFormData)(e.target),f=`${g}/${d?`${d}/`:""}`;return(0,s.queryLog)(P,E,1,`[create][${n}]`,`${j}/${f}`,c),(0,a.setData)(j,f,{body:JSON.stringify(c),method:n,middleware:x?.(),mode:P}).then((e=>{i?.([...t,e]),r?.()&&l?.()})).catch((()=>{console.error("Erreur de création","Une erreur est survenu lors de la création dans la base de données")}))},read:{data:t,loading:o,error:d},handleUpdate:(e,r={method:"PUT",name:$})=>{e.preventDefault();const{method:o="PUT",pathTail:n,name:d=$}=r,f=(0,u.formExtractor)(e.target,d);let y;y="array"==m?[...t]:t;const h=[];return f.forEach((e=>{const r=(0,u.getPathTail)(e,_,d,n),i=`${b}/${r?`${r}/`:""}`;let l=!1;if("array"==m){const t=y.findIndex((e=>e[d]==r));if(null!=t){const r={...y[t],...e};l=!(0,c.default)(y[t],r),y[t]=r}else y.push(e)}else l=!(0,c.default)(y,t),y={...y,...e};l&&((0,s.queryLog)(P,E,1,`[update][${o}]`,`${j}/${i}`,e),h.push((0,a.setData)(j,i,{body:JSON.stringify(e),method:o,middleware:x?.(),mode:P})))})),Promise.all(h).then((()=>{i?.(y),p?.()&&l?.()}))},handleDelete:(e,r={method:"DELETE",name:$})=>{e?.preventDefault(),e?.stopPropagation();const{method:o="DELETE",pathTail:n,name:d=$,id:c}=r,f=(0,u.getPathTail)({[d]:c.toString()},_,d,n),p=`${O}/${f}/`;return(0,s.queryLog)(P,E,1,`[delete][${o}]`,`${j}/${p}`),(0,a.setData)(j,p,{method:o,middleware:x?.(),mode:P}).then((()=>{if("array"==m){const e=t.findIndex((e=>e[d]==c)),r=t;(0,s.queryLog)(P,E,3,`Removing index ${e}`);const o=[...r.slice(0,e),...r.slice(e+1,r.length)];(0,s.queryLog)(P,E,4,"Array updated",o),i?.(o)}else i?.(t);y?.()&&l?.()}))}},l)})})})}},434:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(893),a=o(r(180)),s=o(r(156));class u extends s.default.Component{constructor(){super(...arguments),this.state={hasError:!1,error:{e:void 0,info:void 0}},this.componentDidCatch=(e,t)=>{console.error(e),this.setState({hasError:!0,error:{e,info:t}})}}render(){const{children:e}=this.props,{hasError:t,error:r}=this.state;return t?(0,n.jsxs)("div",{className:a.default.main,children:[(0,n.jsx)("div",{children:r?.e?.message}),(0,n.jsx)("hr",{}),(0,n.jsx)("div",{children:r?.info?.componentStack})]}):(0,n.jsx)(s.default.Fragment,{children:e})}}t.default=u},324:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(893),a=o(r(434)),s=r(759),u=r(156);t.default=({children:e,query:t,method:r,delay:o,body:d,onRead:i})=>{const[l,c]=(0,u.useState)({data:null,loading:!0,error:null}),[f,p]=(0,u.useState)(),[y,h]=(0,u.useState)(!1),{requestMiddleware:m,domain:g}=(0,s.useQueryOptions)(),v=(0,u.useCallback)((e=>c({data:e,loading:l.loading,error:l.error})),[l]);return(0,u.useEffect)((()=>{f?.abort();const e=new AbortController,r=window.setTimeout((()=>{const r=r=>{const o=Object.fromEntries(Object.entries(r).filter((([e])=>!e.includes("Content-Type"))));fetch(`${g}/${t}`,{headers:o,signal:e.signal}).then((e=>{if(200!=e.status)throw Error(e.statusText??"Error");return e.json()})).then((e=>{c({data:e,loading:!1,error:null}),i?.(e)})).catch((e=>{console.log("ERROR",e.toString()),"AbortError"!=e.name&&c({data:null,loading:!1,error:e.toString()})}))};m?m().then(r):r({})}),o??0);return p(e),c({data:null,loading:!0,error:null}),()=>{e?.abort(),window.clearTimeout(r)}}),[t,y]),(0,n.jsx)(a.default,{children:e(l.data,l.loading,l.error,v,(()=>h(!y)))})}},759:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.QueryOptionsProvider=t.useQueryOptions=void 0;const o=r(156),n=(0,o.createContext)({domain:"",parameterType:"path",mode:"production",verbosity:1,idName:"id"});t.useQueryOptions=()=>{const e=(0,o.useContext)(n);if(!e)throw new Error("No context for 'useQueryOptions'");return e},t.QueryOptionsProvider=n.Provider},276:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.QueryOptionsProvider=t.Query=t.CRUD=void 0;const n=o(r(215));t.CRUD=n.default;const a=o(r(324));t.Query=a.default;const s=r(759);Object.defineProperty(t,"QueryOptionsProvider",{enumerable:!0,get:function(){return s.QueryOptionsProvider}})},616:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setData=void 0;const o=r(581);t.setData=function(e,t,r={method:"POST"}){const{body:n,method:a,middleware:s,mode:u}=r,d=r=>fetch(`${e}/${t}`,{method:a,headers:r,body:n}).then((e=>e.ok?e.text().then((t=>{try{return JSON.parse(t)}catch(r){return(0,o.queryWarn)(u??"production",0,0,"Could not parse response to json",e),t}})):e.text().then((e=>{throw new Error(e)}))),(e=>{console.error(e)}));return s?s.then(d):d({})}},581:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.queryWarn=t.queryLog=void 0,t.queryLog=(e,t,r,...o)=>{"development"==e&&r<=t&&console.log("[react-query]",...o)},t.queryWarn=(e,t,r,...o)=>{"development"==e&&r<=t&&console.warn("[react-query]",...o)}},187:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useForceUpdate=t.getPathTail=t.seperate=t.seperateAndKeepIds=t.formExtractor=t.getFormData=void 0;const o=r(156);t.getFormData=e=>{const t=e;return Object.keys(e).map((e=>t[e])).filter((e=>{const t=e.tagName?.toLocaleLowerCase?.();return e.name&&("input"==t||"select"==t)})).reduce(((e,t)=>{const{name:r,value:o,checked:n,type:a,required:s}=t,u="checkbox"==a;if(s&&(""==o||null==o))throw new Error(`Can't use an empty value for ${r}`);const d=parseInt(o);let i=isNaN(d)?o:d;return{...e,[r]:u?n:i}}),{})},t.formExtractor=(e,r)=>{const o=(0,t.getFormData)(e);return null!=o[r]?[o]:Object.entries(o).reduce(((e,o)=>{const n=o[0],[a,s]=(0,t.seperateAndKeepIds)([n])[0],u=e.find((e=>e[r]==s));let d=s;try{d=parseInt(s)}catch(e){}return u?u[a]=o[1]:e.push({[r]:d,[a]:o[1]}),e}),[])},t.seperateAndKeepIds=e=>(0,t.seperate)(e).map((e=>{const t=e[1],r=t[t.length-1];return[e[0].replace(new RegExp(`(-|_)?${r}$`),""),r]})),t.seperate=e=>e.map((e=>[e,e.replace(/([0-9]+)/," $1").replace(/(-|_)/g," ").replace(/([A-Z])/g," $1").trim().toLocaleLowerCase().split(" ").filter((e=>""!=e))])),t.getPathTail=(e,t,r,o)=>{const n=e[r];return"path"==t&&""!=n&&null!=n?n:o},t.useForceUpdate=()=>(0,o.useReducer)((()=>({})),{})[1]},63:e=>{e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var o,n,a;if(Array.isArray(t)){if((o=t.length)!=r.length)return!1;for(n=o;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((o=(a=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=o;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,a[n]))return!1;for(n=o;0!=n--;){var s=a[n];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r}},180:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});const o={"button-default":"N34oaDgHtJlptqxVv9Pn","button-selected":"Ja0ovO_h3eaEsaboqDC7","button-primary":"KTfuLE7LnSGRHDFPD0EA","button-validate":"jY9MIHyO7T8W_QNpfx0k","button-inverse":"m40wbnuJh67XxmYctJLR","button-ignore":"ZeIjhLVvw0JqjuR8kYjT","button-invalid":"ZedjeDkFzo6JcAGxyZPn","button-valid":"Jk7f76XpP7SLD92LvmM3",main:"SIApxQzQlZp0L1gN0_QW"}},251:(e,t,r)=>{var o=r(156),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,u=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function i(e,t,r){var o,a={},i=null,l=null;for(o in void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,o)&&!d.hasOwnProperty(o)&&(a[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===a[o]&&(a[o]=t[o]);return{$$typeof:n,type:e,key:i,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=i,t.jsxs=i},893:(e,t,r)=>{e.exports=r(251)},156:t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e].call(a.exports,a,a.exports,o),a.exports}return o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(276)})()));