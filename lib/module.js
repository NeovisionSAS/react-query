/*! For license information please see module.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports["react-query"]=t(require("react")):e["react-query"]=t(e.react)}(self,(e=>(()=>{"use strict";var t={215:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(893),a=r(156),s=r(616),d=r(187),u=o(r(434)),l=o(r(324)),i=r(759);t.default=({children:e,endPoints:t,onCreated:r,onRead:o,onUpdated:c,onDeleted:f,delay:p,type:y="array"})=>{const[h,m,v,_]="string"==typeof t?new Array(4).fill(t,0,-1):[t.create,t.read,t.update,t.delete],{parameterType:b,domain:g,requestMiddleware:O,mode:j}=(0,i.useQueryOptions)();return(0,n.jsx)(u.default,{children:(0,n.jsx)(l.default,{query:`${m}`,delay:p,onRead:o,children:(t,o,u,l,i)=>(0,n.jsx)(a.Fragment,{children:e({handleCreate:e=>{e.preventDefault();const o=(0,d.getFormData)(e.target);return(0,s.setData)(g,`${h}/`,{body:JSON.stringify(o)}).then((e=>{l?.([...t,e]),r?.()&&i?.()})).catch((()=>{console.error("Erreur de création","Une erreur est survenu lors de la création dans la base de données")}))},read:{data:t,loading:o,error:u},handleUpdate:(e,r={method:"PUT",name:"id"})=>{e.preventDefault();const{method:o,pathTail:n,name:a}=r,u=(0,d.getFormData)(e.target);"development"==j&&console.log("formData to send",u);const f=u[a];let p;return p="path"==b&&""!=f&&null!=f?f:n,(0,s.setData)(g,`${v}/${p?`${p}/`:""}`,{body:JSON.stringify(u),method:o,middleware:O?.()}).then((()=>{let e;if("array"==y){const r=t.findIndex((e=>e[a]==f));e=[...t],null!=r?e[r]={...e[r],...u}:e.push(u)}else e=t;l?.(e),c?.()&&i?.()}))},handleDelete:(e,r,o)=>(e?.preventDefault(),e?.stopPropagation(),(0,s.setData)(g,`${_}/${o}/`,{method:"DELETE"}).then((()=>{if("array"==y){const e=t;l?.([...e.slice(0,r),...e.slice(r+1,e.length)])}else l?.(t);f?.()&&i?.()})))},i)})})})}},434:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(893),a=o(r(180)),s=o(r(156));class d extends s.default.Component{constructor(){super(...arguments),this.state={hasError:!1,error:{e:void 0,info:void 0}},this.componentDidCatch=(e,t)=>{console.error(e),this.setState({hasError:!0,error:{e,info:t}})}}render(){const{children:e}=this.props,{hasError:t,error:r}=this.state;return t?(0,n.jsxs)("div",{className:a.default.main,children:[(0,n.jsx)("div",{children:r?.e?.message}),(0,n.jsx)("hr",{}),(0,n.jsx)("div",{children:r?.info?.componentStack})]}):(0,n.jsx)(s.default.Fragment,{children:e})}}t.default=d},324:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(893),a=r(156),s=o(r(434)),d=r(759);t.default=({children:e,query:t,method:r,delay:o,body:u,onRead:l})=>{const[i,c]=(0,a.useState)({data:null,loading:!0,error:null}),[f,p]=(0,a.useState)(),[y,h]=(0,a.useState)(!1),m=(0,d.useQueryOptions)();let v;const _=(0,a.useCallback)((e=>c({data:e,loading:i.loading,error:i.error})),[i]),b=(0,a.useCallback)((()=>h(!y)),[y]);return(0,a.useEffect)((()=>{c({data:null,loading:!0,error:null}),null!=f&&window.clearTimeout(f),p(window.setTimeout((()=>{const{requestMiddleware:e,domain:r}=m,o=e=>{const o=Object.fromEntries(Object.entries(e).filter((([e])=>!e.includes("Content-Type"))));v&&v.abort(),v=new AbortController,fetch(`${r}/${t}`,{headers:o,signal:v.signal}).then((e=>{if(200!=e.status)throw Error(e.statusText??"Error");return e.json()})).then((e=>{c({data:e,loading:!1,error:null}),l?.(e)})).catch((e=>{"AbortError"!=e.name&&(console.error("Query",e),c({data:null,loading:!1,error:e.toString()}))}))};e?e().then(o):o({})}),o??0))}),[t,y]),(0,n.jsx)(s.default,{children:e(i.data,i.loading,i.error,_,b)})}},759:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.QueryOptionsProvider=t.useQueryOptions=void 0;const o=r(156),n=(0,o.createContext)({domain:"",parameterType:"path",mode:"production"});t.useQueryOptions=()=>{const e=(0,o.useContext)(n);if(!e)throw new Error("No context for 'useQueryOptions'");return e},t.QueryOptionsProvider=n.Provider},276:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.QueryOptionsProvider=t.Query=t.CRUD=void 0;const n=o(r(215));t.CRUD=n.default;const a=o(r(324));t.Query=a.default;const s=r(759);Object.defineProperty(t,"QueryOptionsProvider",{enumerable:!0,get:function(){return s.QueryOptionsProvider}})},616:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setData=void 0,t.setData=function(e,t,r={method:"POST"}){const{body:o,method:n,middleware:a}=r,s=r=>fetch(`${e}/${t}`,{method:n,headers:r,body:o}).then((e=>{if(e.ok)return e.json();throw new Error("Something went wrong")}));return a?a.then(s):s({})}},187:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useForceUpdate=t.getFormData=void 0;const o=r(156);t.getFormData=e=>{const t=e;return Object.keys(e).map((e=>t[e])).filter((e=>{const t=e.tagName?.toLocaleLowerCase?.();return e.name&&("input"==t||"select"==t)})).reduce(((e,t)=>{const{name:r,value:o,tagName:n,checked:a,type:s,required:d}=t,u="checkbox"==s;if(d&&(""==o||null==o))throw new Error(`Can't use an empty value for ${r}`);return{...e,[r]:u?a:o}}),{})},t.useForceUpdate=()=>(0,o.useReducer)((()=>({})),{})[1]},180:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});const o={"button-default":"N34oaDgHtJlptqxVv9Pn","button-selected":"Ja0ovO_h3eaEsaboqDC7","button-primary":"KTfuLE7LnSGRHDFPD0EA","button-validate":"jY9MIHyO7T8W_QNpfx0k","button-inverse":"m40wbnuJh67XxmYctJLR","button-ignore":"ZeIjhLVvw0JqjuR8kYjT","button-invalid":"ZedjeDkFzo6JcAGxyZPn","button-valid":"Jk7f76XpP7SLD92LvmM3",main:"SIApxQzQlZp0L1gN0_QW"}},251:(e,t,r)=>{var o=r(156),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,d=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,r){var o,a={},l=null,i=null;for(o in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(i=t.ref),t)s.call(t,o)&&!u.hasOwnProperty(o)&&(a[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===a[o]&&(a[o]=t[o]);return{$$typeof:n,type:e,key:l,ref:i,props:a,_owner:d.current}}t.Fragment=a,t.jsx=l,t.jsxs=l},893:(e,t,r)=>{e.exports=r(251)},156:t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e].call(a.exports,a,a.exports,o),a.exports}return o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(276)})()));