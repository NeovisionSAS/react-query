/*! For license information please see module.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports["react-query"]=t(require("react")):e["react-query"]=t(e.react)}(self,(e=>(()=>{"use strict";var t={215:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(893),a=r(616),u=r(581),s=r(187),d=o(r(434)),i=o(r(324)),l=r(759),c=o(r(63)),p=r(156);t.default=({children:e,endPoints:t,onCreated:r,onRead:o,onUpdated:f,onDeleted:y,delay:m,type:h="array"})=>{const[g,b,v,O]="string"==typeof t?new Array(4).fill(t):[t.create,t.read,t.update,t.delete],{parameterType:_,domain:j,requestMiddleware:q,mode:P,verbosity:x,idName:E}=(0,l.useQueryOptions)();return(0,p.useEffect)((()=>{(0,u.requestLog)(P,x,5,"[endpoints]",`[C]${g}`,`[R]${b}`,`[U]${v}`,`[D]${O}`)}),[g,b,v,O]),(0,n.jsx)(d.default,{children:(0,n.jsx)(i.default,{query:`${b}`,delay:m,onRead:o,children:(t,o,d,i,l)=>(0,n.jsx)(p.Fragment,{children:e({handleCreate:(e,o={method:"POST"})=>{e.preventDefault();const{method:n="POST",pathTail:d}=o,c=(0,s.getFormData)(e.target),p=`${g}/${d?`${d}/`:""}`;return(0,u.requestLog)(P,x,1,`[create][${n}]`,`${j}/${p}`,c),(0,a.request)(j,p,{body:JSON.stringify(c),method:n,headers:q,mode:P}).then((e=>{i?.([...t,e]),r?.()&&l?.()})).catch((()=>{console.error("Erreur de création","Une erreur est survenu lors de la création dans la base de données")}))},read:{data:t,loading:o,error:d},handleUpdate:(e,r={method:"PUT",name:E})=>{e.preventDefault();const{method:o="PUT",pathTail:n,name:d=E}=r,p=(0,s.formExtractor)(e.target,d);let y;y="array"==h?[...t]:t;const m=[];return p.forEach((e=>{const r=(0,s.getPathTail)(e,_,d,n),i=`${v}/${r?`${r}/`:""}`;let l=!1;if("array"==h){const t=y.findIndex((e=>e[d]==r));if(null!=t){const r={...y[t],...e};l=!(0,c.default)(y[t],r),y[t]=r}else y.push(e)}else l=!(0,c.default)(y,t),y={...y,...e};l&&((0,u.requestLog)(P,x,1,`[update][${o}]`,`${j}/${i}`,e),m.push((0,a.request)(j,i,{body:JSON.stringify(e),method:o,headers:q,mode:P})))})),Promise.all(m).then((()=>{i?.(y),f?.()&&l?.()}))},handleDelete:(e,r={method:"DELETE",name:E})=>{e?.preventDefault(),e?.stopPropagation();const{method:o="DELETE",pathTail:n,name:d=E,id:c}=r,p=(0,s.getPathTail)({[d]:c.toString()},_,d,n),f=`${O}/${p}/`;return(0,u.requestLog)(P,x,1,`[delete][${o}]`,`${j}/${f}`),(0,a.request)(j,f,{method:o,headers:q,mode:P}).then((()=>{if("array"==h){const e=t.findIndex((e=>e[d]==c)),r=t;(0,u.requestLog)(P,x,3,`Removing index ${e}`);const o=[...r.slice(0,e),...r.slice(e+1,r.length)];(0,u.requestLog)(P,x,4,"Array updated",o),i?.(o)}else i?.(t);y?.()&&l?.()}))}},l)})})})}},434:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(893),a=o(r(180)),u=o(r(156));class s extends u.default.Component{constructor(){super(...arguments),this.state={hasError:!1,error:{e:void 0,info:void 0}},this.componentDidCatch=(e,t)=>{console.error(e),this.setState({hasError:!0,error:{e,info:t}})}}render(){const{children:e}=this.props,{hasError:t,error:r}=this.state;return t?(0,n.jsxs)("div",{className:a.default.main,children:[(0,n.jsx)("div",{children:r?.e?.message}),(0,n.jsx)("hr",{}),(0,n.jsx)("div",{children:r?.info?.componentStack})]}):(0,n.jsx)(u.default.Fragment,{children:e})}}t.default=s},324:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(893),a=o(r(434)),u=r(759),s=r(156);t.default=({children:e,query:t,method:r,delay:o,body:d,onRead:i})=>{const[l,c]=(0,s.useState)({data:null,loading:!0,error:null}),p=(0,u.useRequest)(),[f,y]=(0,s.useState)(),[m,h]=(0,s.useState)(!1),g=(0,s.useCallback)((e=>c({data:e,loading:!1,error:null})),[l]);return(0,s.useEffect)((()=>{f?.abort();const e=new AbortController,r=window.setTimeout((()=>{p(t,{signal:e.signal}).then((e=>{c({data:e,loading:!1,error:null}),i?.(e)})).catch((e=>{"AbortError"!=e.name&&c({data:null,loading:!1,error:e.toString()})}))}),o??0);return y(e),c({data:null,loading:!0,error:null}),()=>{e?.abort(),window.clearTimeout(r)}}),[t,m]),(0,n.jsx)(a.default,{children:e(l.data,l.loading,l.error,g,(()=>h(!m)))})}},759:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.QueryOptionsProvider=t.useRequest=t.useQueryOptions=void 0;const o=r(616),n=r(156),a=(0,n.createContext)({domain:"",parameterType:"path",mode:"production",verbosity:1,idName:"id"});t.useQueryOptions=()=>{const e=(0,n.useContext)(a);if(!e)throw new Error("No context for 'useQueryOptions'");return e.idName||(e.idName="id"),e},t.useRequest=()=>{const{domain:e,mode:r,requestMiddleware:n}=(0,t.useQueryOptions)();return function(t,a={method:"GET"}){const{headers:u=n,body:s,method:d="GET",mode:i=r,signal:l}=a;return(0,o.request)(e,t,{body:s,headers:u,method:d,mode:i,signal:l})}},t.QueryOptionsProvider=a.Provider},276:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useQueryOptions=t.useRequest=t.request=t.QueryOptionsProvider=t.Query=t.CRUD=void 0;const n=o(r(215));t.CRUD=n.default;const a=o(r(324));t.Query=a.default;const u=r(759);Object.defineProperty(t,"QueryOptionsProvider",{enumerable:!0,get:function(){return u.QueryOptionsProvider}}),Object.defineProperty(t,"useQueryOptions",{enumerable:!0,get:function(){return u.useQueryOptions}}),Object.defineProperty(t,"useRequest",{enumerable:!0,get:function(){return u.useRequest}});const s=r(616);Object.defineProperty(t,"request",{enumerable:!0,get:function(){return s.request}})},616:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.request=void 0;const o=r(581);t.request=function(e,t,r={method:"GET"}){const{body:n,method:a="GET",headers:u,mode:s="production",signal:d}=r,i=r=>fetch(`${e}/${t}`,{headers:r,method:a,body:n,signal:d}).then((e=>e.ok?e.text().then((t=>{try{if("application/json"==r?.["Content-Type"])return JSON.parse(t)}catch(t){(0,o.queryWarn)(s,0,0,"Could not parse response to json",e)}return t})):Promise.reject(e))).catch((e=>new Promise(((t,r)=>{"AbortError"==e.name?(0,o.queryWarn)(s,0,0,e.message):((0,o.queryError)(`${e.url} ${e.status} ${e.statusText}`),r(e))}))));return u?u.then(i):i({})}},581:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.queryError=t.queryWarn=t.requestLog=void 0,t.requestLog=(e,t,r,...o)=>{"development"==e&&r<=t&&console.log("[react-query]",...o)},t.queryWarn=(e,t,r,...o)=>{"development"==e&&r<=t&&console.warn("[react-query]",...o)},t.queryError=(...e)=>{console.error("[react-query]",...e)}},187:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useForceUpdate=t.getPathTail=t.seperate=t.seperateAndKeepIds=t.formExtractor=t.getFormData=void 0;const o=r(156);t.getFormData=e=>{const t=e;return Object.keys(e).map((e=>t[e])).filter((e=>{const t=e.tagName?.toLocaleLowerCase?.();return e.name&&("input"==t||"select"==t)})).reduce(((e,t)=>{const{name:r,value:o,checked:n,type:a,required:u}=t,s="checkbox"==a;if(u&&(""==o||null==o))throw new Error(`Can't use an empty value for ${r}`);let d="number"==a?new Number(o).valueOf():o;return{...e,[r]:s?n:d}}),{})},t.formExtractor=(e,r)=>{const o=(0,t.getFormData)(e);return null!=o[r]?[o]:Object.entries(o).reduce(((e,o)=>{const n=o[0],[a,u]=(0,t.seperateAndKeepIds)([n])[0],s=e.find((e=>e[r]==u));let d=u;try{d=parseInt(u)}catch(e){}return s?s[a]=o[1]:e.push({[r]:d,[a]:o[1]}),e}),[])},t.seperateAndKeepIds=e=>(0,t.seperate)(e).map((e=>{const t=e[1],r=t[t.length-1];return[e[0].replace(new RegExp(`(-|_)?${r}$`),""),r]})),t.seperate=e=>e.map((e=>[e,e.replace(/([0-9]+)/," $1").replace(/(-|_)/g," ").replace(/([A-Z])/g," $1").trim().toLocaleLowerCase().split(" ").filter((e=>""!=e))])),t.getPathTail=(e,t,r,o)=>{const n=e[r];return"path"==t&&""!=n&&null!=n?n:o},t.useForceUpdate=()=>(0,o.useReducer)((()=>({})),{})[1]},63:e=>{e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var o,n,a;if(Array.isArray(t)){if((o=t.length)!=r.length)return!1;for(n=o;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((o=(a=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=o;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,a[n]))return!1;for(n=o;0!=n--;){var u=a[n];if(!e(t[u],r[u]))return!1}return!0}return t!=t&&r!=r}},180:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});const o={"button-default":"N34oaDgHtJlptqxVv9Pn","button-selected":"Ja0ovO_h3eaEsaboqDC7","button-primary":"KTfuLE7LnSGRHDFPD0EA","button-validate":"jY9MIHyO7T8W_QNpfx0k","button-inverse":"m40wbnuJh67XxmYctJLR","button-ignore":"ZeIjhLVvw0JqjuR8kYjT","button-invalid":"ZedjeDkFzo6JcAGxyZPn","button-valid":"Jk7f76XpP7SLD92LvmM3",main:"SIApxQzQlZp0L1gN0_QW"}},251:(e,t,r)=>{var o=r(156),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function i(e,t,r){var o,a={},i=null,l=null;for(o in void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,o)&&!d.hasOwnProperty(o)&&(a[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===a[o]&&(a[o]=t[o]);return{$$typeof:n,type:e,key:i,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=i,t.jsxs=i},893:(e,t,r)=>{e.exports=r(251)},156:t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e].call(a.exports,a,a.exports,o),a.exports}return o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(276)})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVELEVBQVlsRCxLQUFTOEMsRUFBb0JLLEVBQUUzUCxFQUFTd00sSUFDNUU3TCxPQUFPQyxlQUFlWixFQUFTd00sRUFBSyxDQUFFN0MsWUFBWSxFQUFNQyxJQUFLOEYsRUFBV2xELE1DSjNFOEMsRUFBb0JLLEVBQUksQ0FBQ0MsRUFBS0MsSUFBVWxQLE9BQU9rTixVQUFVQyxlQUFlQyxLQUFLNkIsRUFBS0MsR0NDbEZQLEVBQW9CUSxFQUFLOVAsSUFDSCxvQkFBWGlPLFFBQTBCQSxPQUFPOEIsYUFDMUNwUCxPQUFPQyxlQUFlWixFQUFTaU8sT0FBTzhCLFlBQWEsQ0FBRWxQLE1BQU8sV0FFN0RGLE9BQU9DLGVBQWVaLEVBQVMsYUFBYyxDQUFFYSxPQUFPLEtDRjdCeU8sRUFBb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZWFjdC1xdWVyeS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vcmVhY3QtcXVlcnkvLi9zcmMvY29tcG9uZW50cy91dGlscy9DUlVEL2luZGV4LnRzeCIsIndlYnBhY2s6Ly9yZWFjdC1xdWVyeS8uL3NyYy9jb21wb25lbnRzL3V0aWxzL0Vycm9yQm91bmRhcnkvaW5kZXgudHN4Iiwid2VicGFjazovL3JlYWN0LXF1ZXJ5Ly4vc3JjL2NvbXBvbmVudHMvdXRpbHMvUXVlcnkvaW5kZXgudHN4Iiwid2VicGFjazovL3JlYWN0LXF1ZXJ5Ly4vc3JjL2NvbXBvbmVudHMvdXRpbHMvUXVlcnlPcHRpb25zUHJvdmlkZXIvaW5kZXgudHN4Iiwid2VicGFjazovL3JlYWN0LXF1ZXJ5Ly4vc3JjL21vZHVsZS50cyIsIndlYnBhY2s6Ly9yZWFjdC1xdWVyeS8uL3NyYy91dGlscy9hcGkudHMiLCJ3ZWJwYWNrOi8vcmVhY3QtcXVlcnkvLi9zcmMvdXRpbHMvbG9nLnRzIiwid2VicGFjazovL3JlYWN0LXF1ZXJ5Ly4vc3JjL3V0aWxzL3V0aWwudHMiLCJ3ZWJwYWNrOi8vcmVhY3QtcXVlcnkvLi9ub2RlX21vZHVsZXMvZmFzdC1kZWVwLWVxdWFsL2luZGV4LmpzIiwid2VicGFjazovL3JlYWN0LXF1ZXJ5Ly4vc3JjL2NvbXBvbmVudHMvdXRpbHMvRXJyb3JCb3VuZGFyeS9pbmRleC5tb2R1bGUuc2Nzcz82OTk5Iiwid2VicGFjazovL3JlYWN0LXF1ZXJ5Ly4vbm9kZV9tb2R1bGVzL3JlYWN0L2Nqcy9yZWFjdC1qc3gtcnVudGltZS5wcm9kdWN0aW9uLm1pbi5qcyIsIndlYnBhY2s6Ly9yZWFjdC1xdWVyeS8uL25vZGVfbW9kdWxlcy9yZWFjdC9qc3gtcnVudGltZS5qcyIsIndlYnBhY2s6Ly9yZWFjdC1xdWVyeS9leHRlcm5hbCB1bWQgXCJyZWFjdFwiIiwid2VicGFjazovL3JlYWN0LXF1ZXJ5L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3JlYWN0LXF1ZXJ5L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9yZWFjdC1xdWVyeS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3JlYWN0LXF1ZXJ5L3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vcmVhY3QtcXVlcnkvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcInJlYWN0XCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcInJlYWN0XCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcInJlYWN0LXF1ZXJ5XCJdID0gZmFjdG9yeShyZXF1aXJlKFwicmVhY3RcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcInJlYWN0LXF1ZXJ5XCJdID0gZmFjdG9yeShyb290W1wicmVhY3RcIl0pO1xufSkoc2VsZiwgKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzE1Nl9fKSA9PiB7XG5yZXR1cm4gIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBqc3hfcnVudGltZV8xID0gcmVxdWlyZShcInJlYWN0L2pzeC1ydW50aW1lXCIpO1xuY29uc3QgYXBpXzEgPSByZXF1aXJlKFwiLi4vLi4vLi4vdXRpbHMvYXBpXCIpO1xuY29uc3QgbG9nXzEgPSByZXF1aXJlKFwiLi4vLi4vLi4vdXRpbHMvbG9nXCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcIi4uLy4uLy4uL3V0aWxzL3V0aWxcIik7XG5jb25zdCBFcnJvckJvdW5kYXJ5XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL0Vycm9yQm91bmRhcnlcIikpO1xuY29uc3QgUXVlcnlfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vUXVlcnlcIikpO1xuY29uc3QgUXVlcnlPcHRpb25zUHJvdmlkZXJfMSA9IHJlcXVpcmUoXCIuLi9RdWVyeU9wdGlvbnNQcm92aWRlclwiKTtcbmNvbnN0IGZhc3RfZGVlcF9lcXVhbF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJmYXN0LWRlZXAtZXF1YWxcIikpO1xuY29uc3QgcmVhY3RfMSA9IHJlcXVpcmUoXCJyZWFjdFwiKTtcbi8qKlxuICogVGhpcyBjb21wb25lbnQgaXMgdXNlZCB0byBzaW1wbGlmeSBgQ1JVRGAgb3BlcmF0aW9ucy5cbiAqIFlvdSBnaXZlIGl0IHRoZSBgZW5kcG9pbnQocylgIHRvIHdoaWNoIHlvdSB3YW50IHRvIGRvIHJlcXVlc3RzIGFuZCBpdCB3aWxsIGhhbmRsZVxuICogYWxsIG9mIHRoZSB0YXNrcyBpbiB0aGUgYmFja2dyb3VuZCBhbmQgdXBkYXRlIHRoZSBzdGF0ZSBvZiB0aGUgdmFyaWFibGVzXG4gKiBpdCBnaXZlcyB5b3UgZnJvbSB0aGUgY2hpbGQgZnVuY3Rpb24uXG4gKlxuICogTWFrZSBzdXJlIHRvIGRlZmluZSB0aGUgUXVlcnlPcHRpb25zIHBhcmFtIHdpdGggdGhlIGBRdWVyeU9wdGlvbnNQcm92aWRlcmAgY29tcG9uZW50XG4gKlxuICogR28gdG8gdGhlIFtleGFtcGxlcyBkaXJlY3RvcnldKGh0dHBzOi8vYml0YnVja2V0Lm9yZy9uZW92aXNpb24vcmVhY3QtcXVlcnkvc3JjL21hc3Rlci9zcmMvZXhhbXBsZXMpIHRvIHNlZSBleGFtcGxlc1xuICovXG5jb25zdCBDUlVEID0gKHsgY2hpbGRyZW4sIGVuZFBvaW50cywgb25DcmVhdGVkLCBvblJlYWQsIG9uVXBkYXRlZCwgb25EZWxldGVkLCBkZWxheSwgdHlwZSA9ICdhcnJheScsIH0pID0+IHtcbiAgICBjb25zdCBbY3JlYXRlRW5kcG9pbnQsIHJlYWRFbmRwb2ludCwgdXBkYXRlRW5kcG9pbnQsIGRlbGV0ZUVuZHBvaW50XSA9IHR5cGVvZiBlbmRQb2ludHMgPT0gJ3N0cmluZydcbiAgICAgICAgPyBuZXcgQXJyYXkoNCkuZmlsbChlbmRQb2ludHMpXG4gICAgICAgIDogW2VuZFBvaW50cy5jcmVhdGUsIGVuZFBvaW50cy5yZWFkLCBlbmRQb2ludHMudXBkYXRlLCBlbmRQb2ludHMuZGVsZXRlXTtcbiAgICBjb25zdCB7IHBhcmFtZXRlclR5cGUsIGRvbWFpbiwgcmVxdWVzdE1pZGRsZXdhcmUsIG1vZGUsIHZlcmJvc2l0eSwgaWROYW1lIH0gPSAoMCwgUXVlcnlPcHRpb25zUHJvdmlkZXJfMS51c2VRdWVyeU9wdGlvbnMpKCk7XG4gICAgKDAsIHJlYWN0XzEudXNlRWZmZWN0KSgoKSA9PiB7XG4gICAgICAgICgwLCBsb2dfMS5yZXF1ZXN0TG9nKShtb2RlLCB2ZXJib3NpdHksIDUsIGBbZW5kcG9pbnRzXWAsIGBbQ10ke2NyZWF0ZUVuZHBvaW50fWAsIGBbUl0ke3JlYWRFbmRwb2ludH1gLCBgW1VdJHt1cGRhdGVFbmRwb2ludH1gLCBgW0RdJHtkZWxldGVFbmRwb2ludH1gKTtcbiAgICB9LCBbY3JlYXRlRW5kcG9pbnQsIHJlYWRFbmRwb2ludCwgdXBkYXRlRW5kcG9pbnQsIGRlbGV0ZUVuZHBvaW50XSk7XG4gICAgcmV0dXJuICgoMCwganN4X3J1bnRpbWVfMS5qc3gpKEVycm9yQm91bmRhcnlfMS5kZWZhdWx0LCB7IGNoaWxkcmVuOiAoMCwganN4X3J1bnRpbWVfMS5qc3gpKFF1ZXJ5XzEuZGVmYXVsdCwgeyBxdWVyeTogYCR7cmVhZEVuZHBvaW50fWAsIGRlbGF5OiBkZWxheSwgb25SZWFkOiBvblJlYWQsIGNoaWxkcmVuOiAoZGF0YSwgbG9hZGluZywgZXJyb3IsIG1hbnVhbFVwZGF0ZSwgcXVlcnlSZWZyZXNoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICgoMCwganN4X3J1bnRpbWVfMS5qc3gpKHJlYWN0XzEuRnJhZ21lbnQsIHsgY2hpbGRyZW46IGNoaWxkcmVuKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUNyZWF0ZTogKGUsIHBhcmFtcyA9IHsgbWV0aG9kOiAnUE9TVCcgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1ldGhvZCA9ICdQT1NUJywgcGF0aFRhaWwgfSA9IHBhcmFtcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9ICgwLCB1dGlsXzEuZ2V0Rm9ybURhdGEpKGUudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmRwb2ludCA9IGAke2NyZWF0ZUVuZHBvaW50fS8ke3BhdGhUYWlsID8gYCR7cGF0aFRhaWx9L2AgOiAnJ31gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLCBsb2dfMS5yZXF1ZXN0TG9nKShtb2RlLCB2ZXJib3NpdHksIDEsIGBbY3JlYXRlXVske21ldGhvZH1dYCwgYCR7ZG9tYWlufS8ke2VuZHBvaW50fWAsIGZvcm1EYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIGFwaV8xLnJlcXVlc3QpKGRvbWFpbiwgZW5kcG9pbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZm9ybURhdGEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHJlcXVlc3RNaWRkbGV3YXJlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChjcmVhdGVkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbnVhbFVwZGF0ZT8uKFsuLi5kYXRhLCBjcmVhdGVkXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ3JlYXRlZD8uKCkgJiYgcXVlcnlSZWZyZXNoPy4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJldXIgZGUgY3LDqWF0aW9uYCwgYFVuZSBlcnJldXIgZXN0IHN1cnZlbnUgbG9ycyBkZSBsYSBjcsOpYXRpb24gZGFucyBsYSBiYXNlIGRlIGRvbm7DqWVzYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZDogeyBkYXRhLCBsb2FkaW5nLCBlcnJvciB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlVXBkYXRlOiAoZSwgcGFyYW1zID0geyBtZXRob2Q6ICdQVVQnLCBuYW1lOiBpZE5hbWUgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1ldGhvZCA9ICdQVVQnLCBwYXRoVGFpbCwgbmFtZSA9IGlkTmFtZSB9ID0gcGFyYW1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhcyA9ICgwLCB1dGlsXzEuZm9ybUV4dHJhY3RvcikoZS50YXJnZXQsIG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdEYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdhcnJheScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGEgPSBbLi4uZGF0YV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdEYXRhID0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9taXNlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhcy5mb3JFYWNoKChmb3JtRGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWlsID0gKDAsIHV0aWxfMS5nZXRQYXRoVGFpbCkoZm9ybURhdGEsIHBhcmFtZXRlclR5cGUsIG5hbWUsIHBhdGhUYWlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHt1cGRhdGVFbmRwb2ludH0vJHt0YWlsID8gYCR7dGFpbH0vYCA6ICcnfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoYXNDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdhcnJheScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbmV3RGF0YS5maW5kSW5kZXgoKHZhbCkgPT4gdmFsW25hbWVdID09IHRhaWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZERhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLm5ld0RhdGFbaW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5mb3JtRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZWQgPSAhKDAsIGZhc3RfZGVlcF9lcXVhbF8xLmRlZmF1bHQpKG5ld0RhdGFbaW5kZXhdLCBtZXJnZWREYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdEYXRhW2luZGV4XSA9IG1lcmdlZERhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGF0YS5wdXNoKGZvcm1EYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZWQgPSAhKDAsIGZhc3RfZGVlcF9lcXVhbF8xLmRlZmF1bHQpKG5ld0RhdGEsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGF0YSA9IHsgLi4ubmV3RGF0YSwgLi4uZm9ybURhdGEgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ18xLnJlcXVlc3RMb2cpKG1vZGUsIHZlcmJvc2l0eSwgMSwgYFt1cGRhdGVdWyR7bWV0aG9kfV1gLCBgJHtkb21haW59LyR7ZW5kcG9pbnR9YCwgZm9ybURhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCgoMCwgYXBpXzEucmVxdWVzdCkoZG9tYWluLCBlbmRwb2ludCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGZvcm1EYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogcmVxdWVzdE1pZGRsZXdhcmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbnVhbFVwZGF0ZT8uKG5ld0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZWQ/LigpICYmIHF1ZXJ5UmVmcmVzaD8uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRGVsZXRlOiAoZSwgcGFyYW1zID0geyBtZXRob2Q6ICdERUxFVEUnLCBuYW1lOiBpZE5hbWUgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGU/LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZT8uc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBtZXRob2QgPSAnREVMRVRFJywgcGF0aFRhaWwsIG5hbWUgPSBpZE5hbWUsIGlkLCB9ID0gcGFyYW1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhaWwgPSAoMCwgdXRpbF8xLmdldFBhdGhUYWlsKSh7IFtuYW1lXTogaWQudG9TdHJpbmcoKSB9LCBwYXJhbWV0ZXJUeXBlLCBuYW1lLCBwYXRoVGFpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHtkZWxldGVFbmRwb2ludH0vJHt0YWlsfS9gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLCBsb2dfMS5yZXF1ZXN0TG9nKShtb2RlLCB2ZXJib3NpdHksIDEsIGBbZGVsZXRlXVske21ldGhvZH1dYCwgYCR7ZG9tYWlufS8ke2VuZHBvaW50fWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoMCwgYXBpXzEucmVxdWVzdCkoZG9tYWluLCBlbmRwb2ludCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHJlcXVlc3RNaWRkbGV3YXJlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnYXJyYXknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGRhdGEuZmluZEluZGV4KCh2YWwpID0+IHZhbFtuYW1lXSA9PSBpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlZERhdGEgPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ18xLnJlcXVlc3RMb2cpKG1vZGUsIHZlcmJvc2l0eSwgMywgYFJlbW92aW5nIGluZGV4ICR7aW5kZXh9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdBcnIgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udHlwZWREYXRhLnNsaWNlKDAsIGluZGV4KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi50eXBlZERhdGEuc2xpY2UoaW5kZXggKyAxLCB0eXBlZERhdGEubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwgbG9nXzEucmVxdWVzdExvZykobW9kZSwgdmVyYm9zaXR5LCA0LCBgQXJyYXkgdXBkYXRlZGAsIG5ld0Fycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYW51YWxVcGRhdGU/LihuZXdBcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFudWFsVXBkYXRlPy4oZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EZWxldGVkPy4oKSAmJiBxdWVyeVJlZnJlc2g/LigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSwgcXVlcnlSZWZyZXNoKSB9KSk7XG4gICAgICAgICAgICB9IH0pIH0pKTtcbn07XG5leHBvcnRzLmRlZmF1bHQgPSBDUlVEO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBqc3hfcnVudGltZV8xID0gcmVxdWlyZShcInJlYWN0L2pzeC1ydW50aW1lXCIpO1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW5zYWZlLWZpbmFsbHkgKi9cbmNvbnN0IGluZGV4X21vZHVsZV9zY3NzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vaW5kZXgubW9kdWxlLnNjc3NcIikpO1xuY29uc3QgcmVhY3RfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpO1xuY2xhc3MgRXJyb3JCb3VuZGFyeSBleHRlbmRzIHJlYWN0XzEuZGVmYXVsdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgaGFzRXJyb3I6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6IHsgZTogdW5kZWZpbmVkLCBpbmZvOiB1bmRlZmluZWQgfSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jb21wb25lbnREaWRDYXRjaCA9IChlLCBpbmZvKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGhhc0Vycm9yOiB0cnVlLCBlcnJvcjogeyBlLCBpbmZvIH0gfSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3QgeyBoYXNFcnJvciwgZXJyb3IgfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGlmICghaGFzRXJyb3IpXG4gICAgICAgICAgICByZXR1cm4gKDAsIGpzeF9ydW50aW1lXzEuanN4KShyZWFjdF8xLmRlZmF1bHQuRnJhZ21lbnQsIHsgY2hpbGRyZW46IGNoaWxkcmVuIH0pO1xuICAgICAgICByZXR1cm4gKCgwLCBqc3hfcnVudGltZV8xLmpzeHMpKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBpbmRleF9tb2R1bGVfc2Nzc18xLmRlZmF1bHQubWFpbiwgY2hpbGRyZW46IFsoMCwganN4X3J1bnRpbWVfMS5qc3gpKFwiZGl2XCIsIHsgY2hpbGRyZW46IGVycm9yPy5lPy5tZXNzYWdlIH0pLCAoMCwganN4X3J1bnRpbWVfMS5qc3gpKFwiaHJcIiwge30pLCAoMCwganN4X3J1bnRpbWVfMS5qc3gpKFwiZGl2XCIsIHsgY2hpbGRyZW46IGVycm9yPy5pbmZvPy5jb21wb25lbnRTdGFjayB9KV0gfSkpO1xuICAgIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQm91bmRhcnk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IGpzeF9ydW50aW1lXzEgPSByZXF1aXJlKFwicmVhY3QvanN4LXJ1bnRpbWVcIik7XG5jb25zdCBFcnJvckJvdW5kYXJ5XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL0Vycm9yQm91bmRhcnlcIikpO1xuY29uc3QgUXVlcnlPcHRpb25zUHJvdmlkZXJfMSA9IHJlcXVpcmUoXCIuLi9RdWVyeU9wdGlvbnNQcm92aWRlclwiKTtcbmNvbnN0IHJlYWN0XzEgPSByZXF1aXJlKFwicmVhY3RcIik7XG4vKipcbiAqIFRoZSBxdWVyeSBjb21wb25lbnQgaXMgYSBmZXRjaCB3cmFwcGVyIHRoYXQgYWxsb3dzIHRvIGRpcmVjdGx5IGFkZCBsb2dpYyBpbiB0aGUgZGVzaWduIG9mIHRoZSByZWFjdCBET00gYXJjaGl0ZWN0dXJlXG4gKi9cbmNvbnN0IFF1ZXJ5ID0gKHsgY2hpbGRyZW4sIHF1ZXJ5LCBtZXRob2QsIGRlbGF5LCBib2R5LCBvblJlYWQsIH0pID0+IHtcbiAgICAvLyBUaGUgZGVmYXVsdCBkYXRhL2xvYWQvZXJyb3IgdHJpcGxlXG4gICAgY29uc3QgW2RhdGFMb2FkRXJyLCBzZXREYXRhTG9hZEVycl0gPSAoMCwgcmVhY3RfMS51c2VTdGF0ZSkoe1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBsb2FkaW5nOiB0cnVlLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICB9KTtcbiAgICBjb25zdCByZXF1ZXN0ID0gKDAsIFF1ZXJ5T3B0aW9uc1Byb3ZpZGVyXzEudXNlUmVxdWVzdCkoKTtcbiAgICBjb25zdCBbY29udHJvbGxlciwgc2V0Q29udHJvbGxlcl0gPSAoMCwgcmVhY3RfMS51c2VTdGF0ZSkoKTtcbiAgICBjb25zdCBbcmVmcmVzaCwgc2V0UmVmcmVzaF0gPSAoMCwgcmVhY3RfMS51c2VTdGF0ZSkoZmFsc2UpO1xuICAgIGNvbnN0IG1hbnVhbFVwZGF0ZSA9ICgwLCByZWFjdF8xLnVzZUNhbGxiYWNrKSgoZGF0YSkgPT4gc2V0RGF0YUxvYWRFcnIoe1xuICAgICAgICBkYXRhLFxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgfSksIFtkYXRhTG9hZEVycl0pO1xuICAgIC8vIENoZWNrIGlmIHRoZSBxdWVyeSBwcm9wIGhhcyBjaGFuZ2VkXG4gICAgKDAsIHJlYWN0XzEudXNlRWZmZWN0KSgoKSA9PiB7XG4gICAgICAgIGNvbnRyb2xsZXI/LmFib3J0KCk7XG4gICAgICAgIGNvbnN0IGN0cmwgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICByZXF1ZXN0KHF1ZXJ5LCB7XG4gICAgICAgICAgICAgICAgc2lnbmFsOiBjdHJsLnNpZ25hbCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIHNldERhdGFMb2FkRXJyKHsgZGF0YTogcmVzLCBsb2FkaW5nOiBmYWxzZSwgZXJyb3I6IG51bGwgfSk7XG4gICAgICAgICAgICAgICAgb25SZWFkPy4ocmVzKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyLm5hbWUgPT0gJ0Fib3J0RXJyb3InKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgc2V0RGF0YUxvYWRFcnIoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVyci50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIGRlbGF5ID8/IDApO1xuICAgICAgICBzZXRDb250cm9sbGVyKGN0cmwpO1xuICAgICAgICBzZXREYXRhTG9hZEVycih7IGRhdGE6IG51bGwsIGxvYWRpbmc6IHRydWUsIGVycm9yOiBudWxsIH0pO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY3RybD8uYWJvcnQoKTtcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgIH07XG4gICAgfSwgW3F1ZXJ5LCByZWZyZXNoXSk7XG4gICAgcmV0dXJuICgoMCwganN4X3J1bnRpbWVfMS5qc3gpKEVycm9yQm91bmRhcnlfMS5kZWZhdWx0LCB7IGNoaWxkcmVuOiBjaGlsZHJlbihkYXRhTG9hZEVyci5kYXRhLCBkYXRhTG9hZEVyci5sb2FkaW5nLCBkYXRhTG9hZEVyci5lcnJvciwgbWFudWFsVXBkYXRlLCAoKSA9PiBzZXRSZWZyZXNoKCFyZWZyZXNoKSkgfSkpO1xufTtcbmV4cG9ydHMuZGVmYXVsdCA9IFF1ZXJ5O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlF1ZXJ5T3B0aW9uc1Byb3ZpZGVyID0gZXhwb3J0cy51c2VSZXF1ZXN0ID0gZXhwb3J0cy51c2VRdWVyeU9wdGlvbnMgPSB2b2lkIDA7XG5jb25zdCBhcGlfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi91dGlscy9hcGlcIik7XG5jb25zdCByZWFjdF8xID0gcmVxdWlyZShcInJlYWN0XCIpO1xuY29uc3QgcXVlcnlPcHRpb25zQ29udGV4dCA9ICgwLCByZWFjdF8xLmNyZWF0ZUNvbnRleHQpKHtcbiAgICBkb21haW46ICcnLFxuICAgIHBhcmFtZXRlclR5cGU6ICdwYXRoJyxcbiAgICBtb2RlOiAncHJvZHVjdGlvbicsXG4gICAgdmVyYm9zaXR5OiAxLFxuICAgIGlkTmFtZTogJ2lkJyxcbn0pO1xuY29uc3QgdXNlUXVlcnlPcHRpb25zID0gKCkgPT4ge1xuICAgIGNvbnN0IGN0eCA9ICgwLCByZWFjdF8xLnVzZUNvbnRleHQpKHF1ZXJ5T3B0aW9uc0NvbnRleHQpO1xuICAgIGlmICghY3R4KVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjb250ZXh0IGZvciAndXNlUXVlcnlPcHRpb25zJ1wiKTtcbiAgICBpZiAoIWN0eC5pZE5hbWUpXG4gICAgICAgIGN0eC5pZE5hbWUgPSAnaWQnO1xuICAgIHJldHVybiBjdHg7XG59O1xuZXhwb3J0cy51c2VRdWVyeU9wdGlvbnMgPSB1c2VRdWVyeU9wdGlvbnM7XG5jb25zdCB1c2VSZXF1ZXN0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgZG9tYWluLCBtb2RlOiBxTW9kZSwgcmVxdWVzdE1pZGRsZXdhcmU6IHFSZXF1ZXN0TWlkZGxld2FyZSwgfSA9ICgwLCBleHBvcnRzLnVzZVF1ZXJ5T3B0aW9ucykoKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHBhdGgsIG9wdGlvbnMgPSB7IG1ldGhvZDogJ0dFVCcgfSkge1xuICAgICAgICBjb25zdCB7IGhlYWRlcnMgPSBxUmVxdWVzdE1pZGRsZXdhcmUsIGJvZHksIG1ldGhvZCA9ICdHRVQnLCBtb2RlID0gcU1vZGUsIHNpZ25hbCwgfSA9IG9wdGlvbnM7XG4gICAgICAgIHJldHVybiAoMCwgYXBpXzEucmVxdWVzdCkoZG9tYWluLCBwYXRoLCB7IGJvZHksIGhlYWRlcnMsIG1ldGhvZCwgbW9kZSwgc2lnbmFsIH0pO1xuICAgIH07XG59O1xuZXhwb3J0cy51c2VSZXF1ZXN0ID0gdXNlUmVxdWVzdDtcbmV4cG9ydHMuUXVlcnlPcHRpb25zUHJvdmlkZXIgPSBxdWVyeU9wdGlvbnNDb250ZXh0LlByb3ZpZGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnVzZVF1ZXJ5T3B0aW9ucyA9IGV4cG9ydHMudXNlUmVxdWVzdCA9IGV4cG9ydHMucmVxdWVzdCA9IGV4cG9ydHMuUXVlcnlPcHRpb25zUHJvdmlkZXIgPSBleHBvcnRzLlF1ZXJ5ID0gZXhwb3J0cy5DUlVEID0gdm9pZCAwO1xuY29uc3QgQ1JVRF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvdXRpbHMvQ1JVRFwiKSk7XG5leHBvcnRzLkNSVUQgPSBDUlVEXzEuZGVmYXVsdDtcbmNvbnN0IFF1ZXJ5XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vY29tcG9uZW50cy91dGlscy9RdWVyeVwiKSk7XG5leHBvcnRzLlF1ZXJ5ID0gUXVlcnlfMS5kZWZhdWx0O1xuY29uc3QgUXVlcnlPcHRpb25zUHJvdmlkZXJfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvdXRpbHMvUXVlcnlPcHRpb25zUHJvdmlkZXJcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJRdWVyeU9wdGlvbnNQcm92aWRlclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gUXVlcnlPcHRpb25zUHJvdmlkZXJfMS5RdWVyeU9wdGlvbnNQcm92aWRlcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInVzZVF1ZXJ5T3B0aW9uc1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gUXVlcnlPcHRpb25zUHJvdmlkZXJfMS51c2VRdWVyeU9wdGlvbnM7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ1c2VSZXF1ZXN0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBRdWVyeU9wdGlvbnNQcm92aWRlcl8xLnVzZVJlcXVlc3Q7IH0gfSk7XG5jb25zdCBhcGlfMSA9IHJlcXVpcmUoXCIuL3V0aWxzL2FwaVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInJlcXVlc3RcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFwaV8xLnJlcXVlc3Q7IH0gfSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucmVxdWVzdCA9IHZvaWQgMDtcbmNvbnN0IGxvZ18xID0gcmVxdWlyZShcIi4vbG9nXCIpO1xuY29uc3QgcmVxdWVzdCA9IGZ1bmN0aW9uIChkb21haW4sIHBhdGgsIG9wdGlvbnMgPSB7IG1ldGhvZDogJ0dFVCcgfSkge1xuICAgIGNvbnN0IHsgYm9keSwgbWV0aG9kID0gJ0dFVCcsIGhlYWRlcnMsIG1vZGUgPSAncHJvZHVjdGlvbicsIHNpZ25hbCwgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgcmVxID0gKGhlYWRlcnMpID0+IHtcbiAgICAgICAgY29uc3QgcCA9IGZldGNoKGAke2RvbWFpbn0vJHtwYXRofWAsIHtcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnRleHQoKS50aGVuKCh0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVycz8uWydDb250ZW50LVR5cGUnXSA9PSAnYXBwbGljYXRpb24vanNvbicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICgwLCBsb2dfMS5xdWVyeVdhcm4pKG1vZGUsIDAsIDAsIGBDb3VsZCBub3QgcGFyc2UgcmVzcG9uc2UgdG8ganNvbmAsIHJlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKF8sIHJlaikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIubmFtZSA9PSAnQWJvcnRFcnJvcicpXG4gICAgICAgICAgICAgICAgICAgICgwLCBsb2dfMS5xdWVyeVdhcm4pKG1vZGUsIDAsIDAsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ18xLnF1ZXJ5RXJyb3IpKGAke2Vyci51cmx9ICR7ZXJyLnN0YXR1c30gJHtlcnIuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgICAgICAgICAgICAgcmVqKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIGhlYWRlcnMgPyBoZWFkZXJzLnRoZW4ocmVxKSA6IHJlcSh7fSk7XG59O1xuZXhwb3J0cy5yZXF1ZXN0ID0gcmVxdWVzdDtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5xdWVyeUVycm9yID0gZXhwb3J0cy5xdWVyeVdhcm4gPSBleHBvcnRzLnJlcXVlc3RMb2cgPSB2b2lkIDA7XG5jb25zdCByZXF1ZXN0TG9nID0gKG1vZGUsIHBhcmFtVmVyYm9zaXR5LCBsaW1pdFZlcmJvc2l0eSwgLi4ucykgPT4ge1xuICAgIGlmIChtb2RlID09ICdkZXZlbG9wbWVudCcgJiYgbGltaXRWZXJib3NpdHkgPD0gcGFyYW1WZXJib3NpdHkpXG4gICAgICAgIGNvbnNvbGUubG9nKGBbcmVhY3QtcXVlcnldYCwgLi4ucyk7XG59O1xuZXhwb3J0cy5yZXF1ZXN0TG9nID0gcmVxdWVzdExvZztcbmNvbnN0IHF1ZXJ5V2FybiA9IChtb2RlLCBwYXJhbVZlcmJvc2l0eSwgbGltaXRWZXJib3NpdHksIC4uLnMpID0+IHtcbiAgICBpZiAobW9kZSA9PSAnZGV2ZWxvcG1lbnQnICYmIGxpbWl0VmVyYm9zaXR5IDw9IHBhcmFtVmVyYm9zaXR5KVxuICAgICAgICBjb25zb2xlLndhcm4oYFtyZWFjdC1xdWVyeV1gLCAuLi5zKTtcbn07XG5leHBvcnRzLnF1ZXJ5V2FybiA9IHF1ZXJ5V2FybjtcbmNvbnN0IHF1ZXJ5RXJyb3IgPSAoLi4ucykgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoYFtyZWFjdC1xdWVyeV1gLCAuLi5zKTtcbn07XG5leHBvcnRzLnF1ZXJ5RXJyb3IgPSBxdWVyeUVycm9yO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnVzZUZvcmNlVXBkYXRlID0gZXhwb3J0cy5nZXRQYXRoVGFpbCA9IGV4cG9ydHMuc2VwZXJhdGUgPSBleHBvcnRzLnNlcGVyYXRlQW5kS2VlcElkcyA9IGV4cG9ydHMuZm9ybUV4dHJhY3RvciA9IGV4cG9ydHMuZ2V0Rm9ybURhdGEgPSB2b2lkIDA7XG5jb25zdCByZWFjdF8xID0gcmVxdWlyZShcInJlYWN0XCIpO1xuLyoqXG4gKiBnZXRGb3JtRGF0YSBleHRyYWN0cyB0aGUgdmFsdWVzIG9mIHRoZSBpbnB1dCBlbGVtZW50c1xuICogcmVjZWl2ZWQgZnJvbSB0aGUgdGFyZ2V0IG9iamVjdFxuICogQHBhcmFtIHRhcmdldCBUYXJnZXQgcmVjZWl2ZWQgZnJvbSB0aGUgb2JqZWN0IGV2ZW50XG4gKiBAcmV0dXJucyBBbiBvYmplY3Qgb2YgdHlwZSBUIGJ5IGRlZmF1bHQgd2l0aCBrZXkgdmFsdWUgcGFpcnNcbiAqL1xuY29uc3QgZ2V0Rm9ybURhdGEgPSAodGFyZ2V0KSA9PiB7XG4gICAgY29uc3QgdHlwZWRUYXJnZXQgPSB0YXJnZXQ7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRhcmdldClcbiAgICAgICAgLm1hcCgoaykgPT4ge1xuICAgICAgICByZXR1cm4gdHlwZWRUYXJnZXRba107XG4gICAgfSlcbiAgICAgICAgLy8gS2VlcCBuYW1lZCBpbnB1dCBhbmQgc2VsZWN0XG4gICAgICAgIC5maWx0ZXIoKHYpID0+IHtcbiAgICAgICAgY29uc3QgdGFnID0gdi50YWdOYW1lPy50b0xvY2FsZUxvd2VyQ2FzZT8uKCk7XG4gICAgICAgIHJldHVybiB2Lm5hbWUgJiYgKHRhZyA9PSAnaW5wdXQnIHx8IHRhZyA9PSAnc2VsZWN0Jyk7XG4gICAgfSlcbiAgICAgICAgLnJlZHVjZSgoYWNjLCBjdXIpID0+IHtcbiAgICAgICAgY29uc3QgeyBuYW1lLCB2YWx1ZSwgY2hlY2tlZCwgdHlwZSwgcmVxdWlyZWQgfSA9IGN1cjtcbiAgICAgICAgY29uc3QgaXNDaGVja2JveCA9IHR5cGUgPT0gJ2NoZWNrYm94JztcbiAgICAgICAgY29uc3QgaXNWYWxFbXB0eSA9IHZhbHVlID09ICcnIHx8IHZhbHVlID09IG51bGw7XG4gICAgICAgIGlmIChyZXF1aXJlZCAmJiBpc1ZhbEVtcHR5KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4ndCB1c2UgYW4gZW1wdHkgdmFsdWUgZm9yICR7bmFtZX1gKTtcbiAgICAgICAgbGV0IGZpbmFsVmFsdWUgPSB0eXBlID09ICdudW1iZXInID8gbmV3IE51bWJlcih2YWx1ZSkudmFsdWVPZigpIDogdmFsdWU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5hY2MsXG4gICAgICAgICAgICBbbmFtZV06IGlzQ2hlY2tib3ggPyBjaGVja2VkIDogZmluYWxWYWx1ZSxcbiAgICAgICAgfTtcbiAgICB9LCB7fSk7XG59O1xuZXhwb3J0cy5nZXRGb3JtRGF0YSA9IGdldEZvcm1EYXRhO1xuLyoqXG4gKiBFeHRyYWN0cyBhbGwgdGhlIG5lY2Vzc2FyeSBkYXRhIGZyb20gdGhlIGZvcm0gdGFyZ2V0XG4gKlxuICogQHBhcmFtIHRhcmdldCBUYXJnZXQgcmVjZWl2ZWQgZnJvbSB0aGUgb2JqZWN0IGV2ZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSB0aGF0IGlkZW50aWZpZXMgdGhlIGRhdGFcbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZvcm1FeHRyYWN0b3Igd2l0aCBmb3JtIGlucHV0c1xuICogYGBgaHRtbFxuICogPGRpdj5cbiAqICA8aW5wdXQgbmFtZT1cImlkLTFcIiAvPlxuICogIDxpbnB1dCBuYW1lPVwiYWRkcmVzcy0xXCIgdmFsdWU9XCIyIEhhcmxleSBzdHJlZXRcIiAvPlxuICogPC9kaXY+XG4gKiAuLi5cbiAqIDxkaXY+XG4gKiAgPGlucHV0IG5hbWU9XCJpZC1uXCIgLz5cbiAqICA8aW5wdXQgbmFtZT1cImFkZHJlc3MtblwiIHZhbHVlPVwiMzUgcnVlIGNoYW1wcyDDqWx5c8OpZXNcIiAvPlxuICogPC9kaXY+XG4gKiBgYGBcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGZvcm1FeHRyYWN0b3IodGFyZ2V0LCBbXCJpZFwiXSk7XG4gKiAvLyBbXG4gKiAvLyAge2lkOiBcIjFcIiwgYWRkcmVzczogXCIyIEhhcmxleSBzdHJlZXRcIn0sXG4gKiAvLyAgLi4uLFxuICogLy8gIHtpZDogXCJuXCIsIGFkZHJlc3M6IFwiMzUgcnVlIGNoYW1wcyDDqWx5c8OpZXNcIn1cbiAqIC8vIF1cbiAqIGBgYFxuICpcbiAqIEByZXR1cm5zIHtGb3JtRXh0cmFjdG9yRGF0YX0gRm9ybUV4dHJhY29yRGF0YVxuICovXG5jb25zdCBmb3JtRXh0cmFjdG9yID0gKHRhcmdldCwgbmFtZSkgPT4ge1xuICAgIC8vIEdldCBhbGwgdGhlIGRhdGEgZnJvbSB0aGUgZm9ybVxuICAgIGNvbnN0IGZvcm1EYXRhID0gKDAsIGV4cG9ydHMuZ2V0Rm9ybURhdGEpKHRhcmdldCk7XG4gICAgLy8gU2ltcGx5IGNoZWNrIGlmIHRoZXJlIGlzIG5vIGlkIGZvciBlYWNoIGZvcm1EYXRhXG4gICAgaWYgKGZvcm1EYXRhW25hbWVdICE9IG51bGwpXG4gICAgICAgIHJldHVybiBbZm9ybURhdGFdO1xuICAgIC8vIEVhY2ggZm9ybURhdGEgaXMgc3BlY2lmaWMgdG8gYW4gaWRcbiAgICBjb25zdCB2YWx1ZXMgPSBPYmplY3QuZW50cmllcyhmb3JtRGF0YSk7XG4gICAgcmV0dXJuIHZhbHVlcy5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IHtcbiAgICAgICAgY29uc3Qga2V5ID0gY3VyclswXTtcbiAgICAgICAgY29uc3QgW2F0dHIsIGlkXSA9ICgwLCBleHBvcnRzLnNlcGVyYXRlQW5kS2VlcElkcykoW2tleV0pWzBdO1xuICAgICAgICBjb25zdCBlbGVtID0gcHJldi5maW5kKChlbGVtKSA9PiBlbGVtW25hbWVdID09IGlkKTtcbiAgICAgICAgbGV0IHBhcnNlSWQgPSBpZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHBhcnNlSWQgPSBwYXJzZUludChpZCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHsgfVxuICAgICAgICBpZiAoZWxlbSlcbiAgICAgICAgICAgIGVsZW1bYXR0cl0gPSBjdXJyWzFdO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBwcmV2LnB1c2goeyBbbmFtZV06IHBhcnNlSWQsIFthdHRyXTogY3VyclsxXSB9KTtcbiAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgfSwgW10pO1xufTtcbmV4cG9ydHMuZm9ybUV4dHJhY3RvciA9IGZvcm1FeHRyYWN0b3I7XG4vKipcbiAqIFJlZ3JvdXAgc3RyaW5ncyBiYXNlZCBvbiB0aGVpciBpZHMgcmVwcmVzZW50ZWQgYnkgdGhlIGxhc3Qgc2VwZXJhdGlvbiBvZiB0aGUgc3RyaW5nXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBzZXBlcmF0ZUFuZEtlZXBJZHMoXCJoZWxsb1dvcmxkNVwiLFwiaGVsbG8td29ybGQ2XCIsIFwiaGVsbG9Xb3JsZDdcIiwgXCJoZWxsb1dvcmxkXCIpO1xuICogLy8gW1tcImhlbGxvV29ybGRcIiwgXCI1XCJdLCBbXCJoZWxsby13b3JsZFwiLCBcIjZcIl0sIFtcImhlbGxvV29ybGRcIiwgXCI3XCJdLCBbXCJoZWxsb1wiLCBcIldvcmxkXCJdXVxuICogYGBgXG4gKlxuICogQHBhcmFtIHN0cnMgVGhlIHN0cmluZyBhcnJheSB0byBzZWFyY2ggZm9yIGlkcyBhbmQgcmVncm91cCBhbGwgYXR0cmlidXRlcyB3aXRoIHRoZSBzYW1lIGlkc1xuICogQHJldHVybnMgQW5kIGFycmF5IG9mIGFycmF5cyBlYWNoIGNvbnRhaW5pbmcgdGhlIHBhcnNlZCBuYW1lIGFuZCBpZCBvZiB0aGUgc3RyaW5nXG4gKi9cbmNvbnN0IHNlcGVyYXRlQW5kS2VlcElkcyA9IChzdHJzKSA9PiB7XG4gICAgcmV0dXJuICgwLCBleHBvcnRzLnNlcGVyYXRlKShzdHJzKS5tYXAoKHYpID0+IHtcbiAgICAgICAgY29uc3Qgc2VwZXJhdGVkID0gdlsxXTtcbiAgICAgICAgY29uc3QgaWQgPSBzZXBlcmF0ZWRbc2VwZXJhdGVkLmxlbmd0aCAtIDFdO1xuICAgICAgICByZXR1cm4gW3ZbMF0ucmVwbGFjZShuZXcgUmVnRXhwKGAoLXxfKT8ke2lkfSRgKSwgJycpLCBpZF07XG4gICAgfSk7XG59O1xuZXhwb3J0cy5zZXBlcmF0ZUFuZEtlZXBJZHMgPSBzZXBlcmF0ZUFuZEtlZXBJZHM7XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gc2VwZXJhdGVzIHN0cmluZ3MgYmFzZWQgb24gc3BlY2lhbCBjaGFyYWN0ZXJzIC8gY2FzZVxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogc2VwZXJhdGUoW1wiaGVsbG8td29ybGRcIiwgXCJoZWxsb1dvcmxkMlwiLCBcImhlbGxvX3dvcmxkXzJcIl0pXG4gKiAvLyBbXG4gKiAvLyAgIFtcImhlbGxvLXdvcmxkXCIsIFtcImhlbGxvXCIsXCJ3b3JsZFwiXV0sXG4gKiAvLyAgIFtcImhlbGxvV29ybGQyXCIsIFtcImhlbGxvXCIsXCJ3b3JsZFwiLCBcIjJcIl1dLFxuICogLy8gICBbXCJoZWxsb193b3JsZF8yXCIsIFtcImhlbGxvXCIsIFwid29ybGRcIiwgXCIyXCJdXVxuICogLy8gXVxuICogYGBgXG4gKlxuICogQHBhcmFtIHN0cnMgVGhlIHN0cmluZyBhcnJheSB0byB0cnkgc2VwZXJhdGVcbiAqIEByZXR1cm5zIEFuIGFycmF5IG9mIGFycmF5cyB3aXRoIHRoZSBpbnB1dCAvIG91dHB1dCBzdHJpbmdzXG4gKi9cbmNvbnN0IHNlcGVyYXRlID0gKHN0cnMpID0+IHtcbiAgICByZXR1cm4gc3Rycy5tYXAoKHN0cikgPT4ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgc3RyLFxuICAgICAgICAgICAgc3RyXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoLyhbMC05XSspLywgJyAkMScpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoLygtfF8pL2csICcgJylcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvKFtBLVpdKS9nLCAnICQxJylcbiAgICAgICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgICAgICAgLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAuc3BsaXQoJyAnKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKHMpID0+IHMgIT0gJycpLFxuICAgICAgICBdO1xuICAgIH0pO1xufTtcbmV4cG9ydHMuc2VwZXJhdGUgPSBzZXBlcmF0ZTtcbmNvbnN0IGdldFBhdGhUYWlsID0gKGRhdGEsIHR5cGUsIG5hbWUsIHBhdGhUYWlsKSA9PiB7XG4gICAgY29uc3QgaWQgPSBkYXRhW25hbWVdO1xuICAgIGlmICh0eXBlID09ICdwYXRoJyAmJiBpZCAhPSAnJyAmJiBpZCAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGhUYWlsO1xufTtcbmV4cG9ydHMuZ2V0UGF0aFRhaWwgPSBnZXRQYXRoVGFpbDtcbmNvbnN0IHVzZUZvcmNlVXBkYXRlID0gKCkgPT4ge1xuICAgIHJldHVybiAoMCwgcmVhY3RfMS51c2VSZWR1Y2VyKSgoKSA9PiAoe30pLCB7fSlbMV07XG59O1xuZXhwb3J0cy51c2VGb3JjZVVwZGF0ZSA9IHVzZUZvcmNlVXBkYXRlO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBkbyBub3QgZWRpdCAuanMgZmlsZXMgZGlyZWN0bHkgLSBlZGl0IHNyYy9pbmRleC5qc3RcblxuXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZXF1YWwoYSwgYikge1xuICBpZiAoYSA9PT0gYikgcmV0dXJuIHRydWU7XG5cbiAgaWYgKGEgJiYgYiAmJiB0eXBlb2YgYSA9PSAnb2JqZWN0JyAmJiB0eXBlb2YgYiA9PSAnb2JqZWN0Jykge1xuICAgIGlmIChhLmNvbnN0cnVjdG9yICE9PSBiLmNvbnN0cnVjdG9yKSByZXR1cm4gZmFsc2U7XG5cbiAgICB2YXIgbGVuZ3RoLCBpLCBrZXlzO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSB7XG4gICAgICBsZW5ndGggPSBhLmxlbmd0aDtcbiAgICAgIGlmIChsZW5ndGggIT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOylcbiAgICAgICAgaWYgKCFlcXVhbChhW2ldLCBiW2ldKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG5cblxuICAgIGlmIChhLmNvbnN0cnVjdG9yID09PSBSZWdFeHApIHJldHVybiBhLnNvdXJjZSA9PT0gYi5zb3VyY2UgJiYgYS5mbGFncyA9PT0gYi5mbGFncztcbiAgICBpZiAoYS52YWx1ZU9mICE9PSBPYmplY3QucHJvdG90eXBlLnZhbHVlT2YpIHJldHVybiBhLnZhbHVlT2YoKSA9PT0gYi52YWx1ZU9mKCk7XG4gICAgaWYgKGEudG9TdHJpbmcgIT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcpIHJldHVybiBhLnRvU3RyaW5nKCkgPT09IGIudG9TdHJpbmcoKTtcblxuICAgIGtleXMgPSBPYmplY3Qua2V5cyhhKTtcbiAgICBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICBpZiAobGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiKS5sZW5ndGgpIHJldHVybiBmYWxzZTtcblxuICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOylcbiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIGtleXNbaV0pKSByZXR1cm4gZmFsc2U7XG5cbiAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuXG4gICAgICBpZiAoIWVxdWFsKGFba2V5XSwgYltrZXldKSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gdHJ1ZSBpZiBib3RoIE5hTiwgZmFsc2Ugb3RoZXJ3aXNlXG4gIHJldHVybiBhIT09YSAmJiBiIT09Yjtcbn07XG4iLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCBkZWZhdWx0IHtcImJ1dHRvbi1kZWZhdWx0XCI6XCJOMzRvYURnSHRKbHB0cXhWdjlQblwiLFwiYnV0dG9uLXNlbGVjdGVkXCI6XCJKYTBvdk9faDNlYUVzYWJvcURDN1wiLFwiYnV0dG9uLXByaW1hcnlcIjpcIktUZnVMRTdMblNHUkhERlBEMEVBXCIsXCJidXR0b24tdmFsaWRhdGVcIjpcImpZOU1JSHlPN1Q4V19RTnBmeDBrXCIsXCJidXR0b24taW52ZXJzZVwiOlwibTQwd2JudUpoNjdYeG1ZY3RKTFJcIixcImJ1dHRvbi1pZ25vcmVcIjpcIlplSWpoTFZ2dzBKcWp1UjhrWWpUXCIsXCJidXR0b24taW52YWxpZFwiOlwiWmVkamVEa0Z6bzZKY0FHeHlaUG5cIixcImJ1dHRvbi12YWxpZFwiOlwiSms3Zjc2WHBQN1NMRDkyTHZtTTNcIixcIm1haW5cIjpcIlNJQXB4UXpRbFpwMEwxZ04wX1FXXCJ9OyIsIi8qKlxuICogQGxpY2Vuc2UgUmVhY3RcbiAqIHJlYWN0LWpzeC1ydW50aW1lLnByb2R1Y3Rpb24ubWluLmpzXG4gKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cbid1c2Ugc3RyaWN0Jzt2YXIgZj1yZXF1aXJlKFwicmVhY3RcIiksaz1TeW1ib2wuZm9yKFwicmVhY3QuZWxlbWVudFwiKSxsPVN5bWJvbC5mb3IoXCJyZWFjdC5mcmFnbWVudFwiKSxtPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksbj1mLl9fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVELlJlYWN0Q3VycmVudE93bmVyLHA9e2tleTohMCxyZWY6ITAsX19zZWxmOiEwLF9fc291cmNlOiEwfTtcbmZ1bmN0aW9uIHEoYyxhLGcpe3ZhciBiLGQ9e30sZT1udWxsLGg9bnVsbDt2b2lkIDAhPT1nJiYoZT1cIlwiK2cpO3ZvaWQgMCE9PWEua2V5JiYoZT1cIlwiK2Eua2V5KTt2b2lkIDAhPT1hLnJlZiYmKGg9YS5yZWYpO2ZvcihiIGluIGEpbS5jYWxsKGEsYikmJiFwLmhhc093blByb3BlcnR5KGIpJiYoZFtiXT1hW2JdKTtpZihjJiZjLmRlZmF1bHRQcm9wcylmb3IoYiBpbiBhPWMuZGVmYXVsdFByb3BzLGEpdm9pZCAwPT09ZFtiXSYmKGRbYl09YVtiXSk7cmV0dXJueyQkdHlwZW9mOmssdHlwZTpjLGtleTplLHJlZjpoLHByb3BzOmQsX293bmVyOm4uY3VycmVudH19ZXhwb3J0cy5GcmFnbWVudD1sO2V4cG9ydHMuanN4PXE7ZXhwb3J0cy5qc3hzPXE7XG4iLCIndXNlIHN0cmljdCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9janMvcmVhY3QtanN4LXJ1bnRpbWUucHJvZHVjdGlvbi5taW4uanMnKTtcbn0gZWxzZSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9janMvcmVhY3QtanN4LXJ1bnRpbWUuZGV2ZWxvcG1lbnQuanMnKTtcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMTU2X187IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjc2KTtcbiJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzE1Nl9fIiwiX19pbXBvcnREZWZhdWx0IiwidGhpcyIsIm1vZCIsIl9fZXNNb2R1bGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwianN4X3J1bnRpbWVfMSIsImFwaV8xIiwibG9nXzEiLCJ1dGlsXzEiLCJFcnJvckJvdW5kYXJ5XzEiLCJRdWVyeV8xIiwiUXVlcnlPcHRpb25zUHJvdmlkZXJfMSIsImZhc3RfZGVlcF9lcXVhbF8xIiwicmVhY3RfMSIsImNoaWxkcmVuIiwiZW5kUG9pbnRzIiwib25DcmVhdGVkIiwib25SZWFkIiwib25VcGRhdGVkIiwib25EZWxldGVkIiwiZGVsYXkiLCJ0eXBlIiwiY3JlYXRlRW5kcG9pbnQiLCJyZWFkRW5kcG9pbnQiLCJ1cGRhdGVFbmRwb2ludCIsImRlbGV0ZUVuZHBvaW50IiwiQXJyYXkiLCJmaWxsIiwiY3JlYXRlIiwicmVhZCIsInVwZGF0ZSIsImRlbGV0ZSIsInBhcmFtZXRlclR5cGUiLCJkb21haW4iLCJyZXF1ZXN0TWlkZGxld2FyZSIsIm1vZGUiLCJ2ZXJib3NpdHkiLCJpZE5hbWUiLCJ1c2VRdWVyeU9wdGlvbnMiLCJ1c2VFZmZlY3QiLCJyZXF1ZXN0TG9nIiwianN4IiwiZGVmYXVsdCIsInF1ZXJ5IiwiZGF0YSIsImxvYWRpbmciLCJlcnJvciIsIm1hbnVhbFVwZGF0ZSIsInF1ZXJ5UmVmcmVzaCIsIkZyYWdtZW50IiwiaGFuZGxlQ3JlYXRlIiwiZSIsInBhcmFtcyIsIm1ldGhvZCIsInByZXZlbnREZWZhdWx0IiwicGF0aFRhaWwiLCJmb3JtRGF0YSIsImdldEZvcm1EYXRhIiwidGFyZ2V0IiwiZW5kcG9pbnQiLCJyZXF1ZXN0IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJoZWFkZXJzIiwidGhlbiIsImNyZWF0ZWQiLCJjYXRjaCIsImNvbnNvbGUiLCJoYW5kbGVVcGRhdGUiLCJuYW1lIiwiZm9ybURhdGFzIiwiZm9ybUV4dHJhY3RvciIsIm5ld0RhdGEiLCJwcm9taXNlcyIsImZvckVhY2giLCJ0YWlsIiwiZ2V0UGF0aFRhaWwiLCJoYXNDaGFuZ2VkIiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJ2YWwiLCJ1bmRlZmluZWQiLCJtZXJnZWREYXRhIiwicHVzaCIsIlByb21pc2UiLCJhbGwiLCJoYW5kbGVEZWxldGUiLCJzdG9wUHJvcGFnYXRpb24iLCJpZCIsInRvU3RyaW5nIiwidHlwZWREYXRhIiwibmV3QXJyIiwic2xpY2UiLCJsZW5ndGgiLCJpbmRleF9tb2R1bGVfc2Nzc18xIiwiRXJyb3JCb3VuZGFyeSIsIkNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwic3VwZXIiLCJhcmd1bWVudHMiLCJzdGF0ZSIsImhhc0Vycm9yIiwiaW5mbyIsImNvbXBvbmVudERpZENhdGNoIiwic2V0U3RhdGUiLCJyZW5kZXIiLCJwcm9wcyIsImpzeHMiLCJjbGFzc05hbWUiLCJtYWluIiwibWVzc2FnZSIsImNvbXBvbmVudFN0YWNrIiwiZGF0YUxvYWRFcnIiLCJzZXREYXRhTG9hZEVyciIsInVzZVN0YXRlIiwidXNlUmVxdWVzdCIsImNvbnRyb2xsZXIiLCJzZXRDb250cm9sbGVyIiwicmVmcmVzaCIsInNldFJlZnJlc2giLCJ1c2VDYWxsYmFjayIsImFib3J0IiwiY3RybCIsIkFib3J0Q29udHJvbGxlciIsInRpbWVvdXQiLCJ3aW5kb3ciLCJzZXRUaW1lb3V0Iiwic2lnbmFsIiwicmVzIiwiZXJyIiwiY2xlYXJUaW1lb3V0IiwiUXVlcnlPcHRpb25zUHJvdmlkZXIiLCJxdWVyeU9wdGlvbnNDb250ZXh0IiwiY3JlYXRlQ29udGV4dCIsImN0eCIsInVzZUNvbnRleHQiLCJFcnJvciIsInFNb2RlIiwicVJlcXVlc3RNaWRkbGV3YXJlIiwicGF0aCIsIm9wdGlvbnMiLCJQcm92aWRlciIsIlF1ZXJ5IiwiQ1JVRCIsIkNSVURfMSIsImVudW1lcmFibGUiLCJnZXQiLCJyZXEiLCJmZXRjaCIsIm9rIiwidGV4dCIsInQiLCJwYXJzZSIsInF1ZXJ5V2FybiIsInJlamVjdCIsIl8iLCJyZWoiLCJxdWVyeUVycm9yIiwidXJsIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsInBhcmFtVmVyYm9zaXR5IiwibGltaXRWZXJib3NpdHkiLCJzIiwibG9nIiwid2FybiIsInVzZUZvcmNlVXBkYXRlIiwic2VwZXJhdGUiLCJzZXBlcmF0ZUFuZEtlZXBJZHMiLCJ0eXBlZFRhcmdldCIsImtleXMiLCJtYXAiLCJrIiwiZmlsdGVyIiwidiIsInRhZyIsInRhZ05hbWUiLCJ0b0xvY2FsZUxvd2VyQ2FzZSIsInJlZHVjZSIsImFjYyIsImN1ciIsImNoZWNrZWQiLCJyZXF1aXJlZCIsImlzQ2hlY2tib3giLCJmaW5hbFZhbHVlIiwiTnVtYmVyIiwidmFsdWVPZiIsImVudHJpZXMiLCJwcmV2IiwiY3VyciIsImtleSIsImF0dHIiLCJlbGVtIiwiZmluZCIsInBhcnNlSWQiLCJwYXJzZUludCIsInN0cnMiLCJzZXBlcmF0ZWQiLCJyZXBsYWNlIiwiUmVnRXhwIiwic3RyIiwidHJpbSIsInNwbGl0IiwidXNlUmVkdWNlciIsImVxdWFsIiwiYSIsImIiLCJpIiwiaXNBcnJheSIsInNvdXJjZSIsImZsYWdzIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZiIsIlN5bWJvbCIsImZvciIsImwiLCJtIiwibiIsIl9fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEIiwiUmVhY3RDdXJyZW50T3duZXIiLCJwIiwicmVmIiwiX19zZWxmIiwiX19zb3VyY2UiLCJxIiwiYyIsImciLCJkIiwiaCIsImRlZmF1bHRQcm9wcyIsIiQkdHlwZW9mIiwiX293bmVyIiwiY3VycmVudCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkZWZpbml0aW9uIiwibyIsIm9iaiIsInByb3AiLCJyIiwidG9TdHJpbmdUYWciXSwic291cmNlUm9vdCI6IiJ9