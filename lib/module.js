/*! For license information please see module.js.LICENSE.txt */
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("react")):"function"==typeof define&&define.amd?define(["react"],r):"object"==typeof exports?exports.reactQuery=r(require("react")):e.reactQuery=r(e.react)}(self,(e=>(()=>{"use strict";var r={251:(e,r,t)=>{var o=t(156),n=Symbol.for("react.element"),a=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(e,r,t){var o,d={},i=null,c=null;for(o in void 0!==t&&(i=""+t),void 0!==r.key&&(i=""+r.key),void 0!==r.ref&&(c=r.ref),r)a.call(r,o)&&!l.hasOwnProperty(o)&&(d[o]=r[o]);if(e&&e.defaultProps)for(o in r=e.defaultProps)void 0===d[o]&&(d[o]=r[o]);return{$$typeof:n,type:e,key:i,ref:c,props:d,_owner:s.current}}r.jsx=d,r.jsxs=d},893:(e,r,t)=>{e.exports=t(251)},156:r=>{r.exports=e}},t={};function o(e){var n=t[e];if(void 0!==n)return n.exports;var a=t[e]={exports:{}};return r[e](a,a.exports,o),a.exports}o.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return o.d(r,{a:r}),r},o.d=(e,r)=>{for(var t in r)o.o(r,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},o.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{o.r(n),o.d(n,{CRUD:()=>h,Query:()=>p,QueryOptionsProvider:()=>u});var e=o(893),r=o(156),t=o.n(r);const a=function(e,r,t={method:"POST"}){const{body:o,method:n,middleware:a}=t,s=t=>fetch(`${e}/${r}`,{method:n,headers:t,body:o}).then((e=>{if(e.ok)return e.json();throw new Error("Something went wrong")}));return a?a.then(s):s({})},s=e=>{const r=e;return Object.keys(e).map((e=>r[e])).filter((e=>{const r=e.tagName?.toLocaleLowerCase?.();return e.name&&("input"==r||"select"==r)})).reduce(((e,r)=>{const{name:t,value:o,tagName:n,checked:a,type:s,required:l}=r,d="checkbox"==s;if(l&&(""==o||null==o))throw new Error(`Can't use an empty value for ${t}`);return{...e,[t]:d?a:o}}),{})};class l extends t().Component{constructor(){super(...arguments),this.state={hasError:!1,error:{e:void 0,info:void 0}},this.componentDidCatch=(e,r)=>{console.error(e),this.setState({hasError:!0,error:{e,info:r}})}}render(){const{children:r}=this.props,{hasError:o,error:n}=this.state;return o?(0,e.jsxs)("div",{className:"SIApxQzQlZp0L1gN0_QW",children:[(0,e.jsx)("div",{children:n?.e?.message}),(0,e.jsx)("hr",{}),(0,e.jsx)("div",{children:n?.info?.componentStack})]}):(0,e.jsx)(t().Fragment,{children:r})}}const d=l,i=(0,r.createContext)({domain:"",protocol:"https"}),c=()=>{const e=(0,r.useContext)(i);if(!e)throw new Error("No context for 'useQueryOptions'");return e},u=i.Provider,p=({children:t,query:o,method:n,delay:a,body:s,onRead:l})=>{const[i,u]=(0,r.useState)({data:null,loading:!0,error:null}),[p,h]=(0,r.useState)(),[f,y]=(0,r.useState)(!1),m=c();let g;const v=(0,r.useCallback)((e=>u({data:e,loading:i.loading,error:i.error})),[i]),x=(0,r.useCallback)((()=>y(!f)),[f]);return(0,r.useEffect)((()=>{u({data:null,loading:!0,error:null}),null!=p&&window.clearTimeout(p),h(window.setTimeout((()=>{const{requestMiddleware:e,domain:r,protocol:t}=m,n=e=>{g&&g.abort(),g=new AbortController,fetch(`${t??"https"}://${r}/${o}`,{headers:e,signal:g.signal}).then((e=>{if(200!=e.status)throw Error(e.statusText??"Error");return e.json()})).then((e=>{u({data:e,loading:!1,error:null}),l?.(e)})).catch((e=>{"AbortError"!=e.name&&(console.error("Query",e),u({data:null,loading:!1,error:e.toString()}))}))};e?e().then(n):n({})}),a??0))}),[o,f]),(0,e.jsx)(d,{children:t(i.data,i.loading,i.error,v,x)})},h=({children:t,endPoints:o,onCreated:n,onRead:l,onUpdated:i,onDeleted:u,delay:h,type:f="array"})=>{const[y,m,g,v]="string"==typeof o?new Array(4).fill(o,0,-1):[o.create,o.read,o.update,o.delete],{parameterType:x,domain:b}=c();return(0,e.jsx)(d,{children:(0,e.jsx)(p,{query:`${m}`,delay:h,onRead:l,children:(o,l,d,c,p)=>(0,e.jsx)(r.Fragment,{children:t({handleCreate:e=>{e.preventDefault();const r=s(e.target);return a(b,`${y}/`,{body:JSON.stringify(r)}).then((e=>{c?.([...o,e]),n?.()&&p?.()})).catch((()=>{console.error("Erreur de création","Une erreur est survenu lors de la création dans la base de données")}))},read:{data:o,loading:l,error:d},handleUpdate:(e,r={method:"PUT",name:"id"})=>{e.preventDefault();const{method:t,pathTail:n,name:l}=r,d=s(e.target),u=d[l];let h;return h="path"==x&&""!=u&&null!=u?u:n,a(b,`${g}/${n?`${n}/`:""}`,{body:JSON.stringify(d),method:t}).then((()=>{let e;if("array"==f){const r=o.findIndex((e=>e[l]==u));e=[...o],null!=r?e[r]={...e[r],...d}:e.push(d)}else e=o;c?.(e),i?.()&&p?.()}))},handleDelete:(e,r,t)=>(e?.preventDefault(),e?.stopPropagation(),a(b,`${v}/${t}/`,{method:"DELETE"}).then((()=>{if("array"==f){const e=o;c?.([...e.slice(0,r),...e.slice(r+1,e.length)])}else c?.(o);u?.()&&p?.()})))},p)})})})}})(),n})()));