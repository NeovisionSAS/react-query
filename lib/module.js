/*! For license information please see module.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports["react-query"]=t(require("react")):e["react-query"]=t(e.react)}(self,(e=>(()=>{"use strict";var t={215:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(893),a=r(156),d=r(616),u=r(581),l=r(187),s=o(r(434)),i=o(r(324)),c=r(759);t.default=({children:e,endPoints:t,onCreated:r,onRead:o,onUpdated:f,onDeleted:p,delay:y,type:h="array"})=>{const[m,v,_,b]="string"==typeof t?new Array(4).fill(t,0,-1):[t.create,t.read,t.update,t.delete],{parameterType:g,domain:O,requestMiddleware:j,mode:x}=(0,c.useQueryOptions)();return(0,n.jsx)(s.default,{children:(0,n.jsx)(i.default,{query:`${v}`,delay:y,onRead:o,children:(t,o,s,i,c)=>(0,n.jsx)(a.Fragment,{children:e({handleCreate:(e,o={method:"POST"})=>{e.preventDefault();const{method:n,pathTail:a}=o,s=(0,l.getFormData)(e.target);return"development"==x&&(0,u.queryLog)(`[create][${n}]`,s),(0,d.setData)(O,`${m}/${a?`${a}/`:""}`,{body:JSON.stringify(s),method:n,middleware:j?.()}).then((e=>{i?.([...t,e]),r?.()&&c?.()})).catch((()=>{console.error("Erreur de création","Une erreur est survenu lors de la création dans la base de données")}))},read:{data:t,loading:o,error:s},handleUpdate:(e,r={method:"PUT",name:"id"})=>{e.preventDefault();const{method:o,pathTail:n,name:a}=r,s=(0,l.getFormData)(e.target);"development"==x&&(0,u.queryLog)(`[update][${o}]`,s);const p=s[a];let y;return y="path"==g&&""!=p&&null!=p?p:n,(0,d.setData)(O,`${_}/${y?`${y}/`:""}`,{body:JSON.stringify(s),method:o,middleware:j?.()}).then((()=>{let e;if("array"==h){const r=t.findIndex((e=>e[a]==p));e=[...t],null!=r?e[r]={...e[r],...s}:e.push(s)}else e=t;i?.(e),f?.()&&c?.()}))},handleDelete:(e,r={method:"DELETE"})=>{e?.preventDefault(),e?.stopPropagation();const{method:o,pathTail:n,name:a,id:l}=r;let s;return"development"==x&&(0,u.queryLog)(`[delete][${o}]`),s="path"==g&&null!=l?l:n,(0,d.setData)(O,`${b}/${s}/`,{method:"DELETE"}).then((()=>{if("array"==h){const e=t.findIndex((e=>e[a]==l)),r=t;i?.([...r.slice(0,e),...r.slice(e+1,r.length)])}else i?.(t);p?.()&&c?.()}))}},c)})})})}},434:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(893),a=o(r(180)),d=o(r(156));class u extends d.default.Component{constructor(){super(...arguments),this.state={hasError:!1,error:{e:void 0,info:void 0}},this.componentDidCatch=(e,t)=>{console.error(e),this.setState({hasError:!0,error:{e,info:t}})}}render(){const{children:e}=this.props,{hasError:t,error:r}=this.state;return t?(0,n.jsxs)("div",{className:a.default.main,children:[(0,n.jsx)("div",{children:r?.e?.message}),(0,n.jsx)("hr",{}),(0,n.jsx)("div",{children:r?.info?.componentStack})]}):(0,n.jsx)(d.default.Fragment,{children:e})}}t.default=u},324:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(893),a=r(156),d=o(r(434)),u=r(759);t.default=({children:e,query:t,method:r,delay:o,body:l,onRead:s})=>{const[i,c]=(0,a.useState)({data:null,loading:!0,error:null}),[f,p]=(0,a.useState)(),[y,h]=(0,a.useState)(!1),m=(0,u.useQueryOptions)();let v;const _=(0,a.useCallback)((e=>c({data:e,loading:i.loading,error:i.error})),[i]),b=(0,a.useCallback)((()=>h(!y)),[y]);return(0,a.useEffect)((()=>{c({data:null,loading:!0,error:null}),null!=f&&window.clearTimeout(f),p(window.setTimeout((()=>{const{requestMiddleware:e,domain:r}=m,o=e=>{const o=Object.fromEntries(Object.entries(e).filter((([e])=>!e.includes("Content-Type"))));v&&v.abort(),v=new AbortController,fetch(`${r}/${t}`,{headers:o,signal:v.signal}).then((e=>{if(200!=e.status)throw Error(e.statusText??"Error");return e.json()})).then((e=>{c({data:e,loading:!1,error:null}),s?.(e)})).catch((e=>{"AbortError"!=e.name&&(console.error("Query",e),c({data:null,loading:!1,error:e.toString()}))}))};e?e().then(o):o({})}),o??0))}),[t,y]),(0,n.jsx)(d.default,{children:e(i.data,i.loading,i.error,_,b)})}},759:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.QueryOptionsProvider=t.useQueryOptions=void 0;const o=r(156),n=(0,o.createContext)({domain:"",parameterType:"path",mode:"production"});t.useQueryOptions=()=>{const e=(0,o.useContext)(n);if(!e)throw new Error("No context for 'useQueryOptions'");return e},t.QueryOptionsProvider=n.Provider},276:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.QueryOptionsProvider=t.Query=t.CRUD=void 0;const n=o(r(215));t.CRUD=n.default;const a=o(r(324));t.Query=a.default;const d=r(759);Object.defineProperty(t,"QueryOptionsProvider",{enumerable:!0,get:function(){return d.QueryOptionsProvider}})},616:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setData=void 0,t.setData=function(e,t,r={method:"POST"}){const{body:o,method:n,middleware:a}=r,d=r=>fetch(`${e}/${t}`,{method:n,headers:r,body:o}).then((e=>{if(e.ok)return e.json();throw new Error("Something went wrong")}));return a?a.then(d):d({})}},581:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.queryLog=void 0,t.queryLog=(...e)=>{console.log("[react-query]",...e)}},187:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useForceUpdate=t.getFormData=void 0;const o=r(156);t.getFormData=e=>{const t=e;return Object.keys(e).map((e=>t[e])).filter((e=>{const t=e.tagName?.toLocaleLowerCase?.();return e.name&&("input"==t||"select"==t)})).reduce(((e,t)=>{const{name:r,value:o,tagName:n,checked:a,type:d,required:u}=t,l="checkbox"==d;if(u&&(""==o||null==o))throw new Error(`Can't use an empty value for ${r}`);return{...e,[r]:l?a:o}}),{})},t.useForceUpdate=()=>(0,o.useReducer)((()=>({})),{})[1]},180:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});const o={"button-default":"N34oaDgHtJlptqxVv9Pn","button-selected":"Ja0ovO_h3eaEsaboqDC7","button-primary":"KTfuLE7LnSGRHDFPD0EA","button-validate":"jY9MIHyO7T8W_QNpfx0k","button-inverse":"m40wbnuJh67XxmYctJLR","button-ignore":"ZeIjhLVvw0JqjuR8kYjT","button-invalid":"ZedjeDkFzo6JcAGxyZPn","button-valid":"Jk7f76XpP7SLD92LvmM3",main:"SIApxQzQlZp0L1gN0_QW"}},251:(e,t,r)=>{var o=r(156),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,u=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function s(e,t,r){var o,a={},s=null,i=null;for(o in void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(i=t.ref),t)d.call(t,o)&&!l.hasOwnProperty(o)&&(a[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===a[o]&&(a[o]=t[o]);return{$$typeof:n,type:e,key:s,ref:i,props:a,_owner:u.current}}t.Fragment=a,t.jsx=s,t.jsxs=s},893:(e,t,r)=>{e.exports=r(251)},156:t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e].call(a.exports,a,a.exports,o),a.exports}return o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(276)})()));